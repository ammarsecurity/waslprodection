import{aS as v,aC as U,bC as E,u as m,aK as c,v as e,t as P,I as g,b9 as a,bi as r,F as D,aV as j,H as M,bJ as R,by as J,at as K,s as X}from"./vendor-Cy4BBKy_.js";import{_ as Y}from"./OrderConfirmModal-CZSsDKcX.js";import{_ as q,b as B,u as I,a as V,f as G,e as Q}from"./app-i4sZYluG.js";import{u as Z,B as ee,a4 as te,k as oe}from"./ui-BDBDEXQQ.js";import{a as ae}from"./framework-C9q9PHhQ.js";import{_ as se}from"./VerifyOtpModal-qTJEUh5g.js";const ne={class:"p-6 bg-white rounded-2xl border border-slate-200"},le={class:"text-slate-950 text-xl font-medium leading-7"},re={class:"my-4 flex justify-between gap-4"},ie={class:"text-slate-950 text-base font-normal leading-normal"},de={class:"text-slate-950 text-base font-normal leading-normal"},ce={class:"my-4 flex justify-between gap-4"},ue={class:"text-red-500 text-base font-normal leading-normal"},me={class:"text-slate-950 text-base font-normal leading-normal"},he={class:"my-4 flex justify-between gap-4"},_e={class:"text-slate-950 text-base font-normal leading-normal"},pe={class:"text-slate-950 text-base font-normal leading-normal"},fe={class:"my-4 flex justify-between gap-4"},ye={class:"text-slate-950 text-base font-normal leading-normal"},be={class:"text-slate-950 text-base font-normal leading-normal"},ve={key:0,class:"p-3 bg-slate-100 text-black rounded-lg mb-2"},ge={class:"text-sm sm:text-base font-medium mb-2"},xe={class:"space-y-2"},we={class:"font-medium"},Ce={class:"font-medium"},ke={class:"mt-4 p-3 bg-slate-200 rounded-lg"},$e={class:"text-sm sm:text-base font-medium"},Pe={class:"text-base font-bold"},Se={class:"my-4 flex justify-between gap-4"},Ne={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},Me={class:"text-slate-950 text-lg font-medium leading-normal tracking-tight"},De={class:"p-4 mt-6 bg-slate-100 rounded-xl"},je={class:"text-black text-base font-normal leading-normal"},Be={class:"relative mt-2"},Ie=["placeholder"],Ve={class:"absolute top-1/2 -translate-y-1/2 left-3"},Ae={key:0,class:"p-4 bg-white rounded-xl border border-slate-200 flex items-center justify-between mt-3"},Oe={class:"animated-text"},Le={key:2,class:"px-6 py-4 w-full mt-4 bg-primary-200 rounded-[10px] text-primary text-base font-semibold flex items-center justify-center gap-2",disabled:""},Te={__name:"BuyNowCheckoutOrderSummary",props:{note:String,paymentMethod:String,deliveryCharge:{type:Number,default:0},selectedProvinces:{type:Object,default:()=>({})},provinceName:{type:String,default:""},provinceArea:{type:String,default:""},nearestLandmark:{type:String,default:""},showCurrency:{type:Function,default:null}},setup(S){const y=new ae,s=B(),n=I(),x=V(),u=Z(),_=v(!1),t=v(""),f=v(!1),i=S,d=v({total_amount:0,delivery_charge:0,coupon_discount:0,payable_amount:0,order_tax_amount:0});U(()=>{t.value=s.coupon_code,s.isLoadingCart||w()}),E(()=>s.isLoadingCart,()=>{s.isLoadingCart||w()});const w=()=>{axios.post("/cart/checkout",{shop_ids:[s.buyNowShopId],is_buy_now:!0,coupon_code:t.value},{headers:{Authorization:x.token}}).then(o=>{d.value=o.data.data.checkout,s.buyNowProduct=o.data.data.checkout_items[0],_.value=o.data.data.apply_coupon,_.value&&t.value.length>0?(u.success(o.data.message,{position:n.langDirection==="rtl"?"bottom-right":"bottom-left"}),s.coupon_code=t.value):!_.value&&t.value.length>0&&(u.error(o.data.message,{position:n.langDirection==="rtl"?"bottom-right":"bottom-left"}),s.coupon_code="")}).catch(o=>{u.error(o.response.data.message,{position:n.langDirection==="rtl"?"bottom-right":"bottom-left"})})},A=()=>{t.value.length>0&&w()},O=()=>{t.value="",_.value=!1,s.coupon_code="",w()},L={component:Q,props:{title:"Order Placed",message:"Your order has been placed successfully."}},C=v(!1),T=()=>{if(!s.address){u.error("Please select shipping address");return}if(i.paymentMethod==null||i.paymentMethod=="card"){u.error("Please select payment method",{position:n.langDirection==="rtl"?"bottom-right":"bottom-left"});return}s.buyNowProduct?(C.value=!0,axios.post("/place-order",{shop_ids:[s.buyNowShopId],payment_method:i.paymentMethod,coupon_code:t.value,note:i.note,is_buy_now:!0,province_name:i.provinceName,province_area:i.provinceArea,nearest_landmark:i.nearestLandmark},{headers:{Authorization:x.token}}).then(o=>{C.value=!1,u(L,{type:"default",hideProgressBar:!0,icon:!1,position:n.langDirection==="rtl"?"bottom-right":"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3}),d.value.total_amount=0,d.value.delivery_charge=0,d.value.coupon_discount=0,d.value.payable_amount=0,s.buyNowProduct=null,s.coupon_code="";let l=o.data.data.order_payment_url;if(l!=null){z(l);return}else s.showOrderConfirmModal=!0}).catch(o=>{u.error(o.response.data.message,{position:n.langDirection==="rtl"?"bottom-right":"bottom-left"}),C.value=!1})):u.error("Please select at least one product",{position:n.langDirection==="rtl"?"bottom-right":"bottom-left"})},z=o=>{let l=700,b=700,k=screen.width/2-l/2,p=screen.height/2-b/2,F="popup,resizable,height="+b+",width="+l+",top="+p+",left="+k,h=window.open(o,null,F);h.title="Payment Window Screen - Make Payment",h.onload=()=>{h.title="Payment Window Screen - Make Payment"},h.focus();var $=setInterval(H,1e3);function H(){try{if(h.closed||!h){clearInterval($),h.close(),s.orderPaymentCancelModal=!0,u.error("Payment Canceled",{position:n.langDirection==="rtl"?"bottom-right":"bottom-left"}),y.push({name:"home"});return}var N=h.location.pathname.replace(/\/order\/\d+/,"");if(N=="/payment/cancel"){clearInterval($),setTimeout(()=>{h.close(),s.orderPaymentCancelModal=!0,u.error("Sorry! Payment Canceled",{position:n.langDirection==="rtl"?"bottom-right":"bottom-left"}),y.push({name:"home"})},8e3);return}if(N=="/payment/success"){h.close(),clearInterval($),s.showOrderConfirmModal=!0;return}}catch{}}setTimeout(()=>{clearInterval($),h.close()},18e4)};return(o,l)=>{var b,k;return c(),m("div",null,[e("div",ne,[e("div",le,a(o.$t("Order Summary")),1),e("div",re,[e("div",ie,a(o.$t("Subtotal")),1),e("div",de,a(r(n).showCurrency(d.value.total_amount)),1)]),e("div",ce,[e("div",ue,a(o.$t("Discount")),1),e("div",me," -"+a(r(n).showCurrency(d.value.coupon_discount)),1)]),l[3]||(l[3]=e("div",{class:"w-full h-[0px] border-t border-dashed border-slate-400"},null,-1)),e("div",he,[e("div",_e,a(o.$t("Subtotal After Discount")),1),e("div",pe,a(r(n).showCurrency((d.value.total_amount-d.value.coupon_discount).toFixed(2))),1)]),e("div",fe,[e("div",ye,a(o.$t("Shipping Charge")),1),e("div",be,a(i.showCurrency?i.showCurrency(i.deliveryCharge):r(n).showCurrency(i.deliveryCharge)),1)]),((b=d.value.all_vat_taxes)==null?void 0:b.length)>0||d.value.order_tax_amount>0?(c(),m("div",ve,[e("h2",ge,a(o.$t("VAT & Taxes Summary")),1),e("div",xe,[(c(!0),m(D,null,j(d.value.all_vat_taxes,p=>(c(),m("div",{key:p.id,class:"flex justify-between bg-slate-200 p-2 rounded-lg"},[e("span",we,[M(a(p.name)+" ",1),e("small",null,"("+a(p.percentage)+"%)",1)]),e("span",Ce,a(r(n).showCurrency(p.amount)),1)]))),128))]),e("div",ke,[e("h3",$e,a(o.$t("Total Tax Amount"))+": ",1),e("p",Pe,a(r(n).showCurrency(d.value.order_tax_amount)),1)])])):P("",!0),l[4]||(l[4]=e("div",{class:"w-full h-[0px] border border-slate-500"},null,-1)),e("div",Se,[e("div",Ne,a(o.$t("Total Payable")),1),e("div",Me,a(r(n).showCurrency(d.value.payable_amount)),1)]),e("div",De,[e("div",je,a(o.$t("Have a coupon"))+"? ",1),e("div",Be,[R(e("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=p=>t.value=p),class:K(["formInputCoupon pr-14 p-3",_.value?"text-green-500 pl-10":""]),placeholder:o.$t("Enter coupon code")},null,10,Ie),[[J,t.value]]),_.value?(c(),m("button",{key:1,class:"bg-slate-100 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:O},[g(r(te),{class:"w-6 h-6 text-red-500"})])):(c(),m("button",{key:0,class:"bg-slate-700 absolute top-1/2 -translate-y-1/2 right-1.5 h-10 w-10 rounded flex justify-center items-center",onClick:A},[g(r(ee),{class:"w-6 h-6 text-white"})])),e("span",Ve,[_.value?(c(),X(r(oe),{key:0,class:"w-6 h-6 text-green-500"})):P("",!0)])])])]),!((k=r(x).user)!=null&&k.account_verified)&&r(n).orderPlaceAccountVerify?(c(),m("div",Ae,[e("span",Oe,a(o.$t("Please verify your account")),1),e("button",{class:"p-2 border border-primary rounded-md bg-primary-50 text-primary text-sm font-medium",onClick:l[1]||(l[1]=p=>f.value=!0)},a(o.$t("Verify Now")),1)])):P("",!0),C.value?(c(),m("button",Le,[M(a(o.$t("Processing"))+" ",1),g(G)])):(c(),m("button",{key:1,class:"px-6 py-4 w-full mt-4 bg-primary rounded-[10px] text-white text-base font-medium",onClick:T},a(o.$t("Place Order")),1)),g(Y),g(se,{showModal:f.value,onHideModal:l[2]||(l[2]=p=>f.value=!1)},null,8,["showModal"])])}}},nt=q(Te,[["__scopeId","data-v-17de8332"]]),ze={class:"space-y-4 mt-3 transition duration-300"},Fe={class:"px-4 py-3 bg-slate-50 rounded-xl border border-slate-100"},He={key:0,class:"text-slate-950 text-base font-medium leading-normal"},We={class:"space-y-2 divide-y divide-slate-200"},Ue={class:"w-[72px] h-[95px]"},Ee=["src"],Re={class:"flex flex-col gap-1 w-full"},Je={class:"text-primary text-xs font-normal leading-none"},Ke={class:"text-slate-950 text-base font-normal leading-normal"},Xe={class:"flex flex-wrap justify-between items-center gap-3"},Ye={class:"flex items-center gap-1"},qe={class:"min-w-8 text-center px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},Ge={class:"px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},Qe={class:"text-slate-800 text-base font-normal leading-normal"},lt={__name:"BuyNowCheckoutProduct",setup(S){V();const y=I(),s=B();return(n,x)=>{var u,_;return c(),m("div",ze,[e("div",Fe,[r(y).multiVendor?(c(),m("div",He,a((u=r(s).buyNowProduct)==null?void 0:u.shop_name),1)):P("",!0),e("div",We,[(c(!0),m(D,null,j((_=r(s).buyNowProduct)==null?void 0:_.products,t=>{var f,i;return c(),m("div",{key:t.id,class:"flex gap-4 justify-start w-full items-center pt-1"},[e("div",Ue,[e("img",{src:t.thumbnail,class:"w-full h-full object-contain"},null,8,Ee)]),e("div",Re,[e("div",Je,a(t==null?void 0:t.brand),1),e("div",Ke,a(t==null?void 0:t.name),1),e("div",Xe,[e("div",Ye,[e("div",qe,a((f=t==null?void 0:t.size)==null?void 0:f.name),1),e("div",Ge,a((i=t==null?void 0:t.color)==null?void 0:i.name),1)]),e("div",Qe," 1 X "+a(r(y).showCurrency((t==null?void 0:t.discount_price)>0?t==null?void 0:t.discount_price:t==null?void 0:t.price)),1)])])])}),128))])])])}}};export{nt as B,lt as _};
