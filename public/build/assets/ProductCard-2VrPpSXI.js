import{aS as g,u as r,aK as i,v as t,t as k,b9 as n,bM as C,at as S,s as U,bi as p,F as P,aV as X,I as j,av as it}from"./vendor-Cy4BBKy_.js";import{a as rt}from"./framework-C9q9PHhQ.js";import{u as at,H as lt,F as dt,x as Y}from"./ui-BDBDEXQQ.js";import{_ as ut}from"./Bag-CcU7-C48.js";import{_ as ct,u as pt,b as vt,a as ht}from"./app-i4sZYluG.js";const kt={class:"product-card-wrapper"},bt={class:"image-section"},_t=["src","alt"],ft={key:0,class:"stock-overlay"},mt={class:"stock-message"},wt={key:0,class:"discount-badge"},yt={class:"discount-inner"},gt={class:"discount-content"},Ct={class:"discount-value"},$t={class:"discount-text"},Mt={class:"product-name"},zt={class:"price-section"},Bt={class:"price-wrapper"},At={class:"current-price"},St={key:0,class:"original-price"},Pt={key:0,class:"savings-badge"},jt={class:"stats-section"},qt={class:"rating-wrapper"},Ft={class:"stars-container"},Nt={class:"stars-background"},xt={class:"rating-text"},Tt={class:"action-section"},Vt={key:0,class:"action-buttons"},Dt=["disabled"],Ht={class:"button-content"},Et={key:0,class:"loader"},It={class:"button-text"},Lt={class:"buy-content"},Ot={class:"buy-text"},Rt={key:1,class:"stock-button",disabled:""},Gt={class:"modal-header"},Qt={class:"modal-title"},Kt={class:"modal-content"},Wt={class:"modal-message"},Jt={class:"auth-options"},Ut={class:"btn-content"},Xt={class:"btn-title"},Yt={class:"btn-subtitle"},Zt={class:"btn-content"},to={class:"btn-title"},oo={class:"btn-subtitle"},so={__name:"ProductCard",props:{product:Object},setup(Z){var F,N;const $=rt(),b=pt(),_=vt(),c=ht(),M=at(),s=Z,z=g(!1),v=g(!1),h=g(!1),B={is_buy_now:!1,product_id:(F=s.product)==null?void 0:F.id,quantity:1,size:null,color:null,unit:null},tt=async e=>{if(!v.value){v.value=!0;try{console.log("Adding to shop group:",B),console.log("Product details:",e),B.is_buy_now=!1,await _.addToCart(B,e);const o=new CustomEvent("productAddedToCart",{detail:e});window.dispatchEvent(o)}catch(o){console.error("Error adding to basket:",o),M.error("Failed to add to cart")}finally{v.value=!1}}},ot=async()=>{var e,o,a,l,d;if(!c.token){h.value=!0;return}await _.addToCart({product_id:(e=s.product)==null?void 0:e.id,is_buy_now:!0,quantity:1,size:null,color:null,unit:null,shop_id:(a=(o=s.product)==null?void 0:o.shop)==null?void 0:a.id},s.product),_.buyNowShopId=(d=(l=s.product)==null?void 0:l.shop)==null?void 0:d.id,$.push({name:"buynow"})},st=async()=>{var e,o,a,l,d,f,m,w,y;h.value=!1,await _.addToCart({product_id:(e=s.product)==null?void 0:e.id,is_buy_now:!0,quantity:1,size:null,color:null,unit:null,shop_id:(a=(o=s.product)==null?void 0:o.shop)==null?void 0:a.id,shop_name:(d=(l=s.product)==null?void 0:l.shop)==null?void 0:d.name,shop_thumbnail:(m=(f=s.product)==null?void 0:f.shop)==null?void 0:m.logo},s.product),_.buyNowShopId=(y=(w=s.product)==null?void 0:w.shop)==null?void 0:y.id,$.push({name:"guest-checkout"})},et=()=>{h.value=!1,c.loginModal=!0},q=g((N=s.product)==null?void 0:N.is_favorite),nt=()=>{if(c.token===null)return c.loginModal=!0;axios.post("/favorite-add-or-remove",{product_id:s.product.id},{headers:{Authorization:c.token}}).then(e=>{s.product.is_favorite=!s.product.is_favorite,q.value=e.data.data.product.is_favorite,q.value===!1?M.warning("Product removed from favorite",{position:b.langDirection==="rtl"?"bottom-right":"bottom-left"}):M.success("Product added to favorite",{position:b.langDirection==="rtl"?"bottom-right":"bottom-left"}),c.favoriteRemove=!0,c.fetchFavoriteProducts()})},A=()=>{s.product.quantity>0&&$.push({name:"productDetails",params:{id:s.product.id}})};return(e,o)=>{var a,l,d,f,m,w,y,x,T,V,D,H,E,I,L,O,R,G,Q,K,W,J;return i(),r("div",kt,[t("div",{class:S(["product-card",[((a=s.product)==null?void 0:a.quantity)>0?"in-stock":"out-of-stock",{"card-hovering":z.value}]]),onMouseenter:o[1]||(o[1]=u=>z.value=!0),onMouseleave:o[2]||(o[2]=u=>z.value=!1)},[o[20]||(o[20]=t("div",{class:"card-glow"},null,-1)),t("div",bt,[t("div",{class:"image-container",onClick:A},[o[7]||(o[7]=t("div",{class:"image-backdrop"},null,-1)),t("img",{src:(l=s.product)==null?void 0:l.thumbnail,class:"product-image",alt:(d=s.product)==null?void 0:d.name,loading:"lazy"},null,8,_t),o[8]||(o[8]=t("div",{class:"image-overlay"},null,-1)),((f=s.product)==null?void 0:f.quantity)<=0?(i(),r("div",ft,[t("div",mt,[o[6]||(o[6]=t("svg",{class:"w-8 h-8 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",null,n(e.$t("Out of Stock")),1)])])):k("",!0)]),((m=s.product)==null?void 0:m.discount_percentage)>0?(i(),r("div",wt,[t("div",yt,[t("div",gt,[t("span",Ct,n((w=s.product)==null?void 0:w.discount_percentage)+"%",1),t("span",$t,n(e.$t("OFF")),1)]),o[9]||(o[9]=t("div",{class:"discount-shine"},null,-1))]),o[10]||(o[10]=t("div",{class:"discount-pulse"},null,-1))])):k("",!0),t("button",{class:S(["favorite-btn",{"is-favorite":(y=s.product)==null?void 0:y.is_favorite}]),onClick:C(nt,["stop"])},[o[11]||(o[11]=t("div",{class:"favorite-bg"},null,-1)),(x=s.product)!=null&&x.is_favorite?(i(),U(p(dt),{key:1,class:"heart-icon filled"})):(i(),U(p(lt),{key:0,class:"w-6 h-6 text-slate-600"}))],2),((T=s.product)==null?void 0:T.quantity)>0?(i(),r("button",{key:1,class:"quick-view-btn",onClick:A},[o[12]||(o[12]=t("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),t("span",null,n(e.$t("Quick View")),1)])):k("",!0)]),t("div",{class:"details-section",onClick:A},[t("h3",Mt,n((V=s.product)==null?void 0:V.name),1),t("div",zt,[t("div",Bt,[t("span",At,n(p(b).showCurrency(((D=s.product)==null?void 0:D.discount_price)>0?(H=s.product)==null?void 0:H.discount_price:(E=s.product)==null?void 0:E.price)),1),((I=s.product)==null?void 0:I.discount_price)>0?(i(),r("span",St,n(p(b).showCurrency((L=s.product)==null?void 0:L.price)),1)):k("",!0)]),((O=s.product)==null?void 0:O.discount_price)>0?(i(),r("div",Pt,n(e.$t("Save"))+" "+n(p(b).showCurrency(((R=s.product)==null?void 0:R.price)-((G=s.product)==null?void 0:G.discount_price))),1)):k("",!0)]),t("div",jt,[t("div",qt,[t("div",Ft,[t("div",Nt,[(i(),r(P,null,X(5,u=>j(p(Y),{key:`bg-${u}`,class:"star-empty"})),64))]),t("div",{class:"stars-filled",style:it(`width: ${((Q=s.product)==null?void 0:Q.rating)/5*100}%`)},[(i(),r(P,null,X(5,u=>j(p(Y),{key:`fill-${u}`,class:"star-filled"})),64))],4)]),t("span",xt,n((K=s.product)==null?void 0:K.rating)+" ("+n((W=s.product)==null?void 0:W.total_reviews)+") ",1)])])]),t("div",Tt,[((J=s.product)==null?void 0:J.quantity)>0?(i(),r("div",Vt,[t("button",{class:S(["cart-button",{"is-loading":v.value}]),disabled:v.value,onClick:o[0]||(o[0]=C(u=>tt(s.product),["stop"]))},[o[14]||(o[14]=t("div",{class:"button-bg"},null,-1)),t("div",Ht,[v.value?(i(),r("div",Et,o[13]||(o[13]=[t("svg",{class:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):(i(),r(P,{key:1},[j(ut,{class:"w-5 h-5"}),t("span",It,n(e.$t("Add")),1)],64))]),o[15]||(o[15]=t("div",{class:"button-shine"},null,-1))],10,Dt),t("button",{class:"buy-button",onClick:C(ot,["stop"])},[o[17]||(o[17]=t("div",{class:"buy-bg"},null,-1)),t("div",Lt,[t("span",Ot,n(e.$t("Buy Now")),1),o[16]||(o[16]=t("svg",{class:"buy-arrow",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1))]),o[18]||(o[18]=t("div",{class:"buy-ripple"},null,-1))])])):(i(),r("button",Rt,[o[19]||(o[19]=t("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",null,n(e.$t("Notify When Available")),1)]))])],34),h.value?(i(),r("div",{key:0,class:"auth-modal-overlay",onClick:o[5]||(o[5]=u=>h.value=!1)},[t("div",{class:"auth-modal",onClick:o[4]||(o[4]=C(()=>{},["stop"]))},[t("div",Gt,[t("h3",Qt,n(e.$t("Complete Purchase")),1),t("button",{class:"close-btn",onClick:o[3]||(o[3]=u=>h.value=!1)},o[21]||(o[21]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("div",Kt,[t("p",Wt,n(e.$t("Please choose how you would like to continue with your purchase")),1),t("div",Jt,[t("button",{class:"guest-btn",onClick:st},[o[22]||(o[22]=t("div",{class:"btn-icon"},[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M8 11v6h8v-6H8z"})])],-1)),t("div",Ut,[t("span",Xt,n(e.$t("Continue as Guest")),1),t("span",Yt,n(e.$t("Quick checkout without account")),1)])]),t("button",{class:"login-btn text-align-right",onClick:et},[o[23]||(o[23]=t("div",{class:"btn-icon"},[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),t("div",Zt,[t("span",to,n(e.$t("Login")),1),t("span",oo,n(e.$t("Access your account and saved info")),1)])])])])])])):k("",!0)])}}},lo=ct(so,[["__scopeId","data-v-911098be"]]);export{lo as P};
