import{_ as it,a as rt,u as at,x as lt,q as dt,G as ut,r as m,c as r,d as i,f as t,e as k,t as n,ak as C,s as j,p as J,l as p,Y as ct,Z as pt,F as q,j as K,h as P,v as U,a1 as vt}from"./app-CzAdLK8K.js";import{_ as ht}from"./Bag-B909iAnr.js";const kt={class:"product-card-wrapper"},bt={class:"image-section"},_t=["src","alt"],ft={key:0,class:"stock-overlay"},wt={class:"stock-message"},yt={key:0,class:"discount-badge"},gt={class:"discount-inner"},mt={class:"discount-content"},Ct={class:"discount-value"},$t={class:"discount-text"},Mt={class:"product-name"},zt={class:"price-section"},Bt={class:"price-wrapper"},At={class:"current-price"},jt={key:0,class:"original-price"},qt={key:0,class:"savings-badge"},Pt={class:"stats-section"},St={class:"rating-wrapper"},Nt={class:"stars-container"},xt={class:"stars-background"},Ft={class:"rating-text"},Tt={class:"action-section"},Dt={key:0,class:"action-buttons"},Vt=["disabled"],Et={class:"button-content"},Ht={key:0,class:"loader"},Lt={class:"button-text"},Ot={class:"buy-content"},Gt={class:"buy-text"},It={key:1,class:"stock-button",disabled:""},Rt={class:"modal-header"},Qt={class:"modal-title"},Wt={class:"modal-content"},Yt={class:"modal-message"},Zt={class:"auth-options"},Jt={class:"btn-content"},Kt={class:"btn-title"},Ut={class:"btn-subtitle"},Xt={class:"btn-content"},ts={class:"btn-title"},ss={class:"btn-subtitle"},os={__name:"ProductCard",props:{product:Object},setup(X){var N,x;const $=rt(),b=at(),_=lt(),c=dt(),M=ut(),o=X,z=m(!1),v=m(!1),h=m(!1),B={is_buy_now:!1,product_id:(N=o.product)==null?void 0:N.id,quantity:1,size:null,color:null,unit:null},tt=async e=>{if(!v.value){v.value=!0;try{console.log("Adding to shop group:",B),console.log("Product details:",e),B.is_buy_now=!1,await _.addToCart(B,e);const s=new CustomEvent("productAddedToCart",{detail:e});window.dispatchEvent(s)}catch(s){console.error("Error adding to basket:",s),M.error("Failed to add to cart")}finally{v.value=!1}}},st=async()=>{var e,s,a,l,d;if(!c.token){h.value=!0;return}await _.addToCart({product_id:(e=o.product)==null?void 0:e.id,is_buy_now:!0,quantity:1,size:null,color:null,unit:null,shop_id:(a=(s=o.product)==null?void 0:s.shop)==null?void 0:a.id},o.product),_.buyNowShopId=(d=(l=o.product)==null?void 0:l.shop)==null?void 0:d.id,$.push({name:"buynow"})},ot=async()=>{var e,s,a,l,d,f,w,y,g;h.value=!1,await _.addToCart({product_id:(e=o.product)==null?void 0:e.id,is_buy_now:!0,quantity:1,size:null,color:null,unit:null,shop_id:(a=(s=o.product)==null?void 0:s.shop)==null?void 0:a.id,shop_name:(d=(l=o.product)==null?void 0:l.shop)==null?void 0:d.name,shop_thumbnail:(w=(f=o.product)==null?void 0:f.shop)==null?void 0:w.logo},o.product),_.buyNowShopId=(g=(y=o.product)==null?void 0:y.shop)==null?void 0:g.id,$.push({name:"guest-checkout"})},et=()=>{h.value=!1,c.loginModal=!0},S=m((x=o.product)==null?void 0:x.is_favorite),nt=()=>{if(c.token===null)return c.loginModal=!0;axios.post("/favorite-add-or-remove",{product_id:o.product.id},{headers:{Authorization:c.token}}).then(e=>{o.product.is_favorite=!o.product.is_favorite,S.value=e.data.data.product.is_favorite,S.value===!1?M.warning("Product removed from favorite",{position:b.langDirection==="rtl"?"bottom-right":"bottom-left"}):M.success("Product added to favorite",{position:b.langDirection==="rtl"?"bottom-right":"bottom-left"}),c.favoriteRemove=!0,c.fetchFavoriteProducts()})},A=()=>{o.product.quantity>0&&$.push({name:"productDetails",params:{id:o.product.id}})};return(e,s)=>{var a,l,d,f,w,y,g,F,T,D,V,E,H,L,O,G,I,R,Q,W,Y,Z;return i(),r("div",kt,[t("div",{class:j(["product-card",[((a=o.product)==null?void 0:a.quantity)>0?"in-stock":"out-of-stock",{"card-hovering":z.value}]]),onMouseenter:s[1]||(s[1]=u=>z.value=!0),onMouseleave:s[2]||(s[2]=u=>z.value=!1)},[s[20]||(s[20]=t("div",{class:"card-glow"},null,-1)),t("div",bt,[t("div",{class:"image-container",onClick:A},[s[7]||(s[7]=t("div",{class:"image-backdrop"},null,-1)),t("img",{src:(l=o.product)==null?void 0:l.thumbnail,class:"product-image",alt:(d=o.product)==null?void 0:d.name,loading:"lazy"},null,8,_t),s[8]||(s[8]=t("div",{class:"image-overlay"},null,-1)),((f=o.product)==null?void 0:f.quantity)<=0?(i(),r("div",ft,[t("div",wt,[s[6]||(s[6]=t("svg",{class:"w-8 h-8 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",null,n(e.$t("Out of Stock")),1)])])):k("",!0)]),((w=o.product)==null?void 0:w.discount_percentage)>0?(i(),r("div",yt,[t("div",gt,[t("div",mt,[t("span",Ct,n((y=o.product)==null?void 0:y.discount_percentage)+"%",1),t("span",$t,n(e.$t("OFF")),1)]),s[9]||(s[9]=t("div",{class:"discount-shine"},null,-1))]),s[10]||(s[10]=t("div",{class:"discount-pulse"},null,-1))])):k("",!0),t("button",{class:j(["favorite-btn",{"is-favorite":(g=o.product)==null?void 0:g.is_favorite}]),onClick:C(nt,["stop"])},[s[11]||(s[11]=t("div",{class:"favorite-bg"},null,-1)),(F=o.product)!=null&&F.is_favorite?(i(),J(p(pt),{key:1,class:"heart-icon filled"})):(i(),J(p(ct),{key:0,class:"w-6 h-6 text-slate-600"}))],2),((T=o.product)==null?void 0:T.quantity)>0?(i(),r("button",{key:1,class:"quick-view-btn",onClick:A},[s[12]||(s[12]=t("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),t("span",null,n(e.$t("Quick View")),1)])):k("",!0)]),t("div",{class:"details-section",onClick:A},[t("h3",Mt,n((D=o.product)==null?void 0:D.name),1),t("div",zt,[t("div",Bt,[t("span",At,n(p(b).showCurrency(((V=o.product)==null?void 0:V.discount_price)>0?(E=o.product)==null?void 0:E.discount_price:(H=o.product)==null?void 0:H.price)),1),((L=o.product)==null?void 0:L.discount_price)>0?(i(),r("span",jt,n(p(b).showCurrency((O=o.product)==null?void 0:O.price)),1)):k("",!0)]),((G=o.product)==null?void 0:G.discount_price)>0?(i(),r("div",qt,n(e.$t("Save"))+" "+n(p(b).showCurrency(((I=o.product)==null?void 0:I.price)-((R=o.product)==null?void 0:R.discount_price))),1)):k("",!0)]),t("div",Pt,[t("div",St,[t("div",Nt,[t("div",xt,[(i(),r(q,null,K(5,u=>P(p(U),{key:`bg-${u}`,class:"star-empty"})),64))]),t("div",{class:"stars-filled",style:vt(`width: ${((Q=o.product)==null?void 0:Q.rating)/5*100}%`)},[(i(),r(q,null,K(5,u=>P(p(U),{key:`fill-${u}`,class:"star-filled"})),64))],4)]),t("span",Ft,n((W=o.product)==null?void 0:W.rating)+" ("+n((Y=o.product)==null?void 0:Y.total_reviews)+") ",1)])])]),t("div",Tt,[((Z=o.product)==null?void 0:Z.quantity)>0?(i(),r("div",Dt,[t("button",{class:j(["cart-button",{"is-loading":v.value}]),disabled:v.value,onClick:s[0]||(s[0]=C(u=>tt(o.product),["stop"]))},[s[14]||(s[14]=t("div",{class:"button-bg"},null,-1)),t("div",Et,[v.value?(i(),r("div",Ht,s[13]||(s[13]=[t("svg",{class:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):(i(),r(q,{key:1},[P(ht,{class:"w-5 h-5"}),t("span",Lt,n(e.$t("Add")),1)],64))]),s[15]||(s[15]=t("div",{class:"button-shine"},null,-1))],10,Vt),t("button",{class:"buy-button",onClick:C(st,["stop"])},[s[17]||(s[17]=t("div",{class:"buy-bg"},null,-1)),t("div",Ot,[t("span",Gt,n(e.$t("Buy Now")),1),s[16]||(s[16]=t("svg",{class:"buy-arrow",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1))]),s[18]||(s[18]=t("div",{class:"buy-ripple"},null,-1))])])):(i(),r("button",It,[s[19]||(s[19]=t("svg",{class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t("span",null,n(e.$t("Notify When Available")),1)]))])],34),h.value?(i(),r("div",{key:0,class:"auth-modal-overlay",onClick:s[5]||(s[5]=u=>h.value=!1)},[t("div",{class:"auth-modal",onClick:s[4]||(s[4]=C(()=>{},["stop"]))},[t("div",Rt,[t("h3",Qt,n(e.$t("Complete Purchase")),1),t("button",{class:"close-btn",onClick:s[3]||(s[3]=u=>h.value=!1)},s[21]||(s[21]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),t("div",Wt,[t("p",Yt,n(e.$t("Please choose how you would like to continue with your purchase")),1),t("div",Zt,[t("button",{class:"guest-btn",onClick:ot},[s[22]||(s[22]=t("div",{class:"btn-icon"},[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M8 11v6h8v-6H8z"})])],-1)),t("div",Jt,[t("span",Kt,n(e.$t("Continue as Guest")),1),t("span",Ut,n(e.$t("Quick checkout without account")),1)])]),t("button",{class:"login-btn text-align-right",onClick:et},[s[23]||(s[23]=t("div",{class:"btn-icon"},[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),t("div",Xt,[t("span",ts,n(e.$t("Login")),1),t("span",ss,n(e.$t("Access your account and saved info")),1)])])])])])])):k("",!0)])}}},is=it(os,[["__scopeId","data-v-911098be"]]);export{is as P};
