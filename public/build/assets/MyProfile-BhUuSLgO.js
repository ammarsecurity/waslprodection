import{_ as re,a as ne,G as de,u as ie,q as ue,r as m,o as pe,w as ce,b as me,c as d,d as i,h as p,f as o,ai as ve,ae as fe,t as s,e as v,g as f,l as u,an as he,a8 as W,A as k,B as V,s as y,a6 as ge,a9 as _e,a0 as be}from"./app-1a8hIMtW.js";import{_ as ye}from"./VerifyOtpModal-PQTTxqXU.js";import{r as X}from"./ExclamationTriangleIcon-CICvcfQQ.js";const xe={class:"p-3 md:p-4 xl:p-6"},$e={class:"max-w-[920px] mx-auto bg-white rounded-xl md:rounded-2xl p-3 md:p-4 xl:p-6"},we={class:"p-4 bg-slate-50 rounded-xl border border-slate-100 relative"},ke={class:"text-primary text-sm font-medium"},Me={class:"flex flex-col gap-2 justify-center items-center"},Pe=["src"],Ce={class:"flex gap-2"},Ve={for:"upload",class:"text-white text-sm font-normal px-2 py-1 md:px-3 md:py-2 bg-slate-800 rounded-md cursor-pointer"},De={key:1,class:"flex items-center gap-1 absolute top-3 right-3 border py-0.5 px-2 rounded-3xl bg-green-200 text-green-600"},Ue={class:"p-3 bg-white rounded-xl border border-slate-100 mt-3"},Ne={class:"grid grid-cols-1 lg:grid-cols-2 gap-y-5 gap-x-6"},Se={for:"name",class:"form-label"},Be=["placeholder"],je={key:0,class:"text-red-500 text-sm"},Ae={for:"name",class:"form-label mb-2"},Le={key:0,class:"text-red-500 text-sm"},Te={for:"phone",class:"form-label justify-between"},Ee={key:0,class:"flex items-center gap-1"},Fe={key:1,class:"text-green-500 text-sm flex items-center gap-0.5"},Oe={class:"flex"},Re=["placeholder","maxlength"],ze={key:0,class:"text-red-500 text-sm"},Ge={for:"gender",class:"form-label bg-transparent"},Ie={value:"",disabled:"",selected:""},qe={value:"male"},He={value:"female"},Ye={value:"other"},Je={key:0,class:"text-red-500 text-sm"},Ke={for:"date",class:"form-label"},Qe={key:0,class:"text-red-500 text-sm"},We={key:0,type:"submit",class:"bg-primary px-4 md:px-6 py-2 md:py-4 rounded-lg :md:rounded-[10px] text-white mt-6"},Xe={key:1,type:"button",class:"bg-primary-200 px-4 md:px-6 py-2 md:py-4 rounded-lg :md:rounded-[10px] text-primary mt-6 flex items-center justify-center cursor-not-allowed gap-2",disabled:""},Ze={__name:"MyProfile",setup(et){var U,N,S,B,j,A,L,T;const Z=ne(),M=de(),c=ie(),r=ue(),a=m(null),x=m(!1),$=m(null),w=m(!1),P=m(!1),D=()=>{P.value=!0},ee=()=>{var e;$.value=(e=r.user)==null?void 0:e.profile_photo,w.value=!1},te=e=>{$.value=URL.createObjectURL(e.target.files[0]),l.value.profile_photo=e.target.files[0],w.value=!0},l=m({name:(U=r.user)==null?void 0:U.name,phone:(N=r.user)==null?void 0:N.phone,gender:(S=r.user)!=null&&S.gender?(B=r.user)==null?void 0:B.gender:"",date_of_birth:(j=r.user)==null?void 0:j.date_of_birth,email:(A=r.user)==null?void 0:A.email,profile_photo:null,phone_code:(L=r.user)==null?void 0:L.phone_code,country:(T=r.user)==null?void 0:T.country}),C=m([]),oe=m(!1);pe(()=>{var e,t;r.user&&($.value=(e=r.user)==null?void 0:e.profile_photo),window.scrollTo(0,0),((t=r.user)==null?void 0:t.email)==="user@readyecommerce.com"&&(oe.value=!0),le()}),ce(()=>l.value.country,e=>{const t=C.value.find(h=>h.name==e);l.value.phone_code=t==null?void 0:t.phone_code});const le=()=>{axios.get("/countries").then(e=>{C.value=e.data.data.countries})},ae={component:be,props:{title:"Profile Updated",message:"Your profile updated successfully"}},se=()=>{const e=new FormData;e.append("name",l.value.name),e.append("phone",l.value.phone),e.append("gender",l.value.gender?l.value.gender:""),e.append("date_of_birth",l.value.date_of_birth?l.value.date_of_birth:""),e.append("email",l.value.email?l.value.email:""),e.append("country",l.value.country?l.value.country:""),e.append("phone_code",l.value.phone_code?l.value.phone_code:""),l.value.profile_photo&&e.append("profile_photo",l.value.profile_photo),x.value=!0,axios.post("/update-profile",e,{headers:{Authorization:r.token}}).then(t=>{r.user=t.data.data.user,w.value=!1,x.value=!1,M(ae,{type:"default",hideProgressBar:!0,icon:!1,position:c.langDirection==="rtl"?"bottom-right":"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3}),a.value={}}).catch(t=>{var h,g,_,b;if(x.value=!1,t.response.status===401){r.logout(),Z.push("/");return}M.error((g=(h=t.response)==null?void 0:h.data)==null?void 0:g.message,{position:c.langDirection==="rtl"?"bottom-right":"bottom-left"}),a.value=t.response.data.errors,(_=a.value)!=null&&_.profile_photo&&M.error((b=a.value)==null?void 0:b.profile_photo[0],{position:c.langDirection==="rtl"?"bottom-right":"bottom-left"})})};return(e,t)=>{var g,_,b,E,F,O,R,z,G,I,q,H,Y,J,K,Q;const h=me("v-select");return i(),d("div",null,[p(ve,{title:e.$t("My Profile")},null,8,["title"]),o("div",xe,[o("form",{onSubmit:t[8]||(t[8]=fe(n=>se(),["prevent"]))},[o("div",$e,[o("div",we,[o("div",ke,s(e.$t("Profile Picture")),1),o("div",Me,[o("img",{src:$.value,alt:"",class:"w-24 h-24 md:w-36 md:h-36 bg-white rounded-full object-cover"},null,8,Pe),o("div",Ce,[o("label",Ve,[o("input",{type:"file",id:"upload",class:"hidden",onChange:te},null,32),f(" "+s(e.$t("Change Photo")),1)]),w.value?(i(),d("button",{key:0,class:"px-2 py-1 md:px-3 md:py-2 bg-red-500 text-white rounded-md",onClick:ee},[p(u(he),{class:"w-5 h-5"})])):v("",!0)])]),(g=u(r).user)!=null&&g.account_verified?(i(),d("div",De,[p(u(W),{class:"w-5 h-5"}),f(" "+s(e.$t("Verified")),1)])):(i(),d("div",{key:0,class:"flex items-center gap-1 absolute top-3 right-3 border py-0.5 px-2 rounded-3xl bg-red-200 text-red-600",onClick:t[0]||(t[0]=n=>D())},[p(u(X),{class:"w-5 h-5"}),f(" "+s(e.$t("Unverified")),1)]))]),o("div",Ue,[o("div",Ne,[o("div",null,[o("label",Se,s(e.$t("Name")),1),k(o("input",{type:"text",id:"name","onUpdate:modelValue":t[1]||(t[1]=n=>l.value.name=n),placeholder:e.$t("Enter name"),class:y(["form-input",a.value&&((_=a.value)!=null&&_.name)?"border-red-500":"border-slate-200"])},null,10,Be),[[V,l.value.name]]),a.value&&((b=a.value)!=null&&b.name)?(i(),d("span",je,s((E=a.value)==null?void 0:E.name[0]),1)):v("",!0)]),o("div",null,[o("label",Ae,s(e.$t("Country")),1),p(h,{options:C.value,label:"name",reduce:n=>n.name,modelValue:l.value.country,"onUpdate:modelValue":t[2]||(t[2]=n=>l.value.country=n),placeholder:e.$t("Select Country"),dir:u(c).langDirection||"ltr"},null,8,["options","reduce","modelValue","placeholder","dir"]),a.value&&((F=a.value)!=null&&F.country)?(i(),d("span",Le,s((O=a.value)==null?void 0:O.country[0]),1)):v("",!0)]),o("div",null,[o("label",Te,[f(s(e.$t("Mobile Number"))+" ",1),u(c).register_otp_type=="phone"?(i(),d("div",Ee,[(R=u(r).user)!=null&&R.email_verified?(i(),d("span",Fe,[p(u(W),{class:"w-4 h-4"}),f(" "+s(e.$t("Verified")),1)])):(i(),d("span",{key:0,class:"text-red-400 text-sm flex items-center gap-0.5 cursor-pointer",onClick:t[3]||(t[3]=n=>D())},[p(u(X),{class:"w-4 h-4"}),f(" "+s(e.$t("Unverified")),1)]))])):v("",!0)]),o("div",Oe,[o("span",{class:y(["text-slate-700 text-base font-normal leading-normal bg-slate-100 p-2 border-y flex items-center",u(c).langDirection=="rtl"?"border-r rounded-tr-lg rounded-br-lg":"border-l rounded-tl-lg rounded-bl-lg"])}," +"+s(l.value.phone_code||"00"),3),k(o("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=n=>l.value.phone=n),placeholder:e.$t("Enter phone number"),class:y(["text-base font-normal w-full p-3 placeholder:text-slate-400 border focus:border-primary outline-none",[(z=a.value)!=null&&z.phone?"border-red-500":"border-slate-200",u(c).langDirection=="rtl"?"rounded-tl-lg rounded-bl-lg":"rounded-tr-lg rounded-br-lg"]]),maxlength:u(c).phoneMaxLength,onInput:t[5]||(t[5]=n=>l.value.phone=l.value.phone.replace(/[^\d]/g,""))},null,42,Re),[[V,l.value.phone]])]),a.value&&((G=a.value)!=null&&G.phone)?(i(),d("span",ze,s((I=a.value)==null?void 0:I.phone[0]),1)):v("",!0)]),o("div",null,[o("label",Ge,s(e.$t("Gender")),1),k(o("select",{name:"gender",id:"gender","onUpdate:modelValue":t[6]||(t[6]=n=>l.value.gender=n),class:y(["form-input bg-transparent h-[52px]",a.value&&((q=a.value)!=null&&q.gender)?"border-red-500":"border-slate-200"])},[o("option",Ie,s(e.$t("Select a gender")),1),o("option",qe,s(e.$t("Male")),1),o("option",He,s(e.$t("Female")),1),o("option",Ye,s(e.$t("Other")),1)],2),[[ge,l.value.gender]]),a.value&&((H=a.value)!=null&&H.gender)?(i(),d("span",Je,s((Y=a.value)==null?void 0:Y.gender[0]),1)):v("",!0)]),o("div",null,[o("label",Ke,s(e.$t("Date of Birth")),1),k(o("input",{type:"date",id:"date","onUpdate:modelValue":t[7]||(t[7]=n=>l.value.date_of_birth=n),class:y(["form-input",a.value&&((J=a.value)!=null&&J.date_of_birth)?"border-red-500":"border-slate-200"])},null,2),[[V,l.value.date_of_birth]]),a.value&&((K=a.value)!=null&&K.date_of_birth)?(i(),d("span",Qe,s((Q=a.value)==null?void 0:Q.date_of_birth[0]),1)):v("",!0)]),t[10]||(t[10]=o("div",null,null,-1))]),x.value?(i(),d("button",Xe,[f(s(e.$t("Processing"))+" ",1),p(_e)])):(i(),d("button",We,s(e.$t("Update Profile")),1))])])],32)]),p(ye,{showModal:P.value,onHideModal:t[9]||(t[9]=n=>P.value=!1)},null,8,["showModal"])])}}},at=re(Ze,[["__scopeId","data-v-29c792d8"]]);export{at as default};
