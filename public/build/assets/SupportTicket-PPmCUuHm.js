import{u as d,aK as i,v as e,b9 as t,at as k,I as v,bi as h,aS as u,bC as F,aC as ie,bH as U,bM as me,bJ as x,t as T,F as z,aV as D,bx as oe,H as y,by as N,bu as ve,aX as fe,bw as B,s as he}from"./vendor-Cy4BBKy_.js";import{_ as L,u as be,a as de,f as ge}from"./app-i4sZYluG.js";import{a as ue}from"./framework-C9q9PHhQ.js";import{n as _e,u as xe,Y as ye,h as ne,G as ke,A as re,aa as we,ab as $e,ac as Te,e as Ce,ad as je}from"./ui-BDBDEXQQ.js";import{a as P}from"./utilities-STV8t6c4.js";import"./icons-DjuF0c5-.js";const Se={class:"flex justify-between items-center gap-1.5 flex-wrap pb-3 border-b border-slate-200"},Me={class:"text-slate-500 text-sm font-normal"},Ve={class:"flex gap-2 items-center"},Ue={class:"text-blue-500 text-sm"},Ae={class:"flex justify-between items-center gap-2 flex-wrap pt-3"},Ne={class:"flex flex-col gap-1"},ze={class:"text-slate-500 text-sm font-normal"},De={class:"text-slate-900 text-sm"},Ie={class:"flex flex-col gap-1 overflow-auto"},Be={class:"text-slate-500 text-sm font-normal"},Pe={class:"text-slate-900 text-sm truncate max-w-60 lg:min-w-60"},Fe={class:"flex flex-col gap-1 overflow-hidden"},Le={class:"text-slate-500 text-sm font-normal"},Ee={class:"text-slate-900 text-sm truncate max-w-80 lg:min-w-80"},Oe={class:"h-8 w-8 bg-slate-100 rounded-2xl flex justify-center items-center"},Re={__name:"TicketCard",props:{supportTicket:Object},setup(g){const M=ue(),_=g,b=()=>{M.push({name:"support-ticket-details",params:{ticketNumber:_.supportTicket.ticket_no}})};return(m,w)=>(i(),d("div",{class:"p-4 bg-white rounded-xl border border-slate-200 cursor-pointer",onClick:w[0]||(w[0]=V=>b())},[e("div",Se,[e("span",Me,t(g.supportTicket.created_at),1),e("div",Ve,[e("span",Ue,"#"+t(g.supportTicket.ticket_no),1),e("span",{class:k(["px-2 py-1 rounded-xl capitalize text-xs ticketStatus",g.supportTicket.status])},t(g.supportTicket.status),3)])]),e("div",Ae,[e("div",Ne,[e("div",ze,t(m.$t("Order Number")),1),e("div",De,t(g.supportTicket.order_number||"N/A"),1)]),e("div",Ie,[e("div",Be,t(m.$t("Issue Type")),1),e("div",Pe,t(g.supportTicket.issue_type),1)]),e("div",Fe,[e("div",Le,t(m.$t("Subject")),1),e("div",Ee,t(g.supportTicket.subject),1)]),e("div",Oe,[v(h(_e),{class:"w-5 h-5 text-slate-600"})])])]))}},He=L(Re,[["__scopeId","data-v-66b61d32"]]),Ge={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},Ye={class:"flex min-h-full items-center justify-center p-4 text-center sm:p-0"},Je={class:"text-slate-950 text-2xl font-medium"},Ke={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},We={for:"name",class:"form-label mb-1"},Xe={value:"",selected:""},qe=["value"],Qe={key:0,class:"text-red-500 text-sm"},Ze={for:"name",class:"form-label mb-1"},et={value:"",selected:""},tt=["value"],st={key:0,class:"text-red-500 text-sm"},at={class:"grid grid-cols-1 mt-6"},lt={for:"Subject",class:"form-label mb-1"},ot=["placeholder"],nt={key:0,class:"text-red-500 text-sm"},rt={class:"grid grid-cols-1 sm:grid-cols-2 gap-6 mt-6"},it={class:"form-label mb-1"},dt=["placeholder"],ut={key:0,class:"text-red-500 text-sm"},ct={class:"form-label mb-1"},pt={for:"attachment",class:"cursor-pointer px-4 py-3 rounded-lg border border-dashed border-primary-400 flex items-center gap-2 text-primary text-xs"},mt={class:"mt-3 flex flex-wrap gap-2.5"},vt=["src"],ft=["onClick"],ht={class:"text-slate-950 text-lg font-bold mt-5 flex justify-between gap-2 flex-wrap"},bt={class:"flex justify-start items-center gap-3"},gt={class:"flex gap-1.5 items-center"},_t={class:"form-label",for:"email"},xt={class:"flex gap-1.5 items-center"},yt={class:"form-label",for:"phone"},kt={class:"grid grid-cols-1 sm:grid-cols-2 gap-6 mt-3"},wt={class:"relative rounded-md"},$t={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},Tt={class:"text-gray-500 sm:text-sm"},Ct=["placeholder"],jt={key:0,class:"text-red-500 text-sm"},St={class:"relative rounded-md"},Mt={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},Vt={class:"text-gray-500 sm:text-sm"},Ut=["placeholder"],At={key:0,class:"text-red-500 text-sm"},Nt={class:"mt-6"},zt=["disabled"],Dt={key:1,type:"button",class:"py-4 px-5 bg-primary-200 text-primary w-full rounded-xl flex justify-center items-center gap-1 cursor-not-allowed",disabled:""},It={__name:"CreateTicketModal",props:{showModal:Boolean},emits:["update:showModal","ticketCreated"],setup(g,{emit:M}){const _=be(),b=u(!1),m=u(!1),w=M,V=g;F(()=>V.showModal,s=>{b.value=s}),F(()=>b.value,s=>{w("update:showModal",s)});const A=xe(),$=de(),C=u([]),o=u({issue_type:"",subject:"",message:"",email:"",phone:"",order_number:""}),f=u([]),l=u({}),j=u([]);ie(()=>{ce(),pe()});const r=s=>{f.value.push({url:URL.createObjectURL(s.target.files[0]),file:s.target.files[0],type:s.target.files[0].type})},c=s=>{f.value.splice(s,1)},S=u(!1),p=()=>{S.value=!0;const s=new FormData;s.append("issue_type",o.value.issue_type),s.append("subject",o.value.subject),s.append("message",o.value.message),s.append("order_number",o.value.order_number?o.value.order_number:""),s.append("email",o.value.email?o.value.email:""),s.append("phone",o.value.phone?o.value.phone:"");for(let a=0;a<f.value.length;a++)s.append("attachments["+a+"]",f.value[a].file);P.post("/support-ticket",s,{headers:{Authorization:$.token}}).then(a=>{S.value=!1,b.value=!1,o.value={},f.value=[],A.success(a.data.message,{position:_.langDirection==="rtl"?"bottom-right":"bottom-left"}),w("ticketCreated",!0)}).catch(a=>{S.value=!1,l.value=a.response.data.errors})},ce=()=>{P.get("/ticket-issue-types",{headers:{Authorization:$.token}}).then(s=>{C.value=s.data.data.issue_types})},pe=async()=>{P.get("/orders",{headers:{Authorization:$.token}}).then(s=>{j.value=s.data.data.orders})};return(s,a)=>(i(),d("div",null,[v(h(Ce),{as:"template",show:b.value},{default:U(()=>[v(h(ye),{as:"div",class:"relative z-10",onClose:a[9]||(a[9]=I=>b.value=!1)},{default:U(()=>[v(h(ne),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:U(()=>a[10]||(a[10]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-50 transition-opacity"},null,-1)])),_:1,__:[10]}),e("div",Ge,[e("div",Ye,[v(h(ne),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:U(()=>[v(h(ke),{class:"relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all my-8 md:my-0 w-full md:max-w-3xl"},{default:U(()=>{var I,E,O,R,H,G,Y,J,K,W,X,q,Q,Z,ee,te,se,ae;return[e("div",{class:k(["bg-white p-5 sm:p-8 relative",h(_).langDirection=="rtl"?"text-right":"text-left"])},[e("div",{class:k(["w-9 h-9 bg-slate-100 rounded-[32px] absolute top-4 flex justify-center items-center cursor-pointer",h(_).langDirection=="rtl"?"left-4":"right-4"]),onClick:a[0]||(a[0]=n=>b.value=!1)},[v(h(re),{class:"w-6 h-6 text-slate-600"})],2),e("div",Je,t(s.$t("Create Support Ticket")),1),e("form",{onSubmit:a[8]||(a[8]=me(n=>p(),["prevent"])),class:"mt-4"},[e("div",Ke,[e("div",null,[e("label",We,t(s.$t("Order Number")),1),x(e("select",{"onUpdate:modelValue":a[1]||(a[1]=n=>o.value.order_number=n),class:k(["form-input bg-transparent",l.value&&((I=l.value)!=null&&I.order_number)?"border-red-500":"border-slate-200"])},[e("option",Xe,t(s.$t("Select order number")),1),(i(!0),d(z,null,D(j.value,n=>(i(),d("option",{key:n.id,value:n.order_code},t(n.order_code),9,qe))),128))],2),[[oe,o.value.order_number]]),l.value&&((E=l.value)!=null&&E.order_number)?(i(),d("span",Qe,t((O=l.value)==null?void 0:O.order_number[0]),1)):T("",!0)]),e("div",null,[e("label",Ze,[y(t(s.$t("Issue Type"))+" ",1),a[11]||(a[11]=e("small",{class:"text-red-500"},"*",-1))]),x(e("select",{"onUpdate:modelValue":a[2]||(a[2]=n=>o.value.issue_type=n),class:k(["form-input bg-transparent",l.value&&((R=l.value)!=null&&R.issue_type)?"border-red-500":"border-slate-200"])},[e("option",et,t(s.$t("Select issue type")),1),(i(!0),d(z,null,D(C.value,n=>(i(),d("option",{key:n.id,value:n.name},t(n.name),9,tt))),128))],2),[[oe,o.value.issue_type]]),l.value&&((H=l.value)!=null&&H.issue_type)?(i(),d("span",st,t((G=l.value)==null?void 0:G.issue_type[0]),1)):T("",!0)])]),e("div",at,[e("div",null,[e("label",lt,t(s.$t("Subject")),1),x(e("input",{type:"text",id:"Subject",placeholder:s.$t("Enter subject"),class:k(["form-input",l.value&&((Y=l.value)!=null&&Y.subject)?"border-red-500":"border-slate-200"]),"onUpdate:modelValue":a[3]||(a[3]=n=>o.value.subject=n)},null,10,ot),[[N,o.value.subject]]),l.value&&((J=l.value)!=null&&J.subject)?(i(),d("span",nt,t((K=l.value)==null?void 0:K.subject[0]),1)):T("",!0)])]),e("div",rt,[e("div",null,[e("label",it,[y(t(s.$t("Message"))+" ",1),a[12]||(a[12]=e("small",{class:"text-red-500"},"*",-1))]),x(e("textarea",{"onUpdate:modelValue":a[4]||(a[4]=n=>o.value.message=n),class:k(["form-input",l.value&&((W=l.value)!=null&&W.message)?"border-red-500":"border-slate-200"]),rows:"4",placeholder:s.$t("Write your message")+"..."},null,10,dt),[[N,o.value.message]]),l.value&&((X=l.value)!=null&&X.message)?(i(),d("span",ut,t((q=l.value)==null?void 0:q.message[0]),1)):T("",!0)]),e("div",null,[e("label",ct,t(s.$t("File Attachment"))+" (jpg, jpeg, png, pdf) ",1),e("label",pt,[e("input",{type:"file",id:"attachment",class:"hidden",accept:"image/jpeg, image/png, image/jpg, application/pdf",onChange:r},null,32),v(h(we),{class:"w-6 h-6"}),y(" "+t(s.$t("Click to upload or, drag and drop here")),1)]),e("div",mt,[(i(!0),d(z,null,D(f.value,(n,le)=>(i(),d("div",{key:le,class:"w-12 h-12 relative"},[e("img",{src:n.type!="application/pdf"?n.url:"/assets/images/pdf.png",class:"w-full h-full object-cover rounded-lg",loading:"lazy"},null,8,vt),e("button",{type:"button",class:"absolute -top-1 -right-1 bg-red-500 rounded-full w-5 h-5 text-white flex justify-center items-center border-2 border-white",onClick:Wt=>c(le)},[v(h(re),{class:"w-4 h-4"})],8,ft)]))),128))])])]),e("div",ht,[y(t(s.$t("Contact Info"))+" ",1),e("div",bt,[e("div",gt,[a[13]||(a[13]=e("input",{type:"checkbox",id:"email",class:"form-checkbox",checked:""},null,-1)),e("label",_t,t(s.$t("Email Address")),1)]),e("div",xt,[x(e("input",{type:"checkbox",id:"phone",class:"form-checkbox","onUpdate:modelValue":a[5]||(a[5]=n=>m.value=n)},null,512),[[ve,m.value]]),e("label",yt,t(s.$t("Phone Number")),1)])])]),e("div",kt,[e("div",null,[e("div",wt,[e("div",$t,[e("span",Tt,[v(h($e),{class:"w-5 h-5"})])]),x(e("input",{type:"email",placeholder:s.$t("Enter email address"),class:k(["form-input",l.value&&((Q=l.value)!=null&&Q.email)?"border-red-500":"border-slate-200"]),style:{"padding-left":"2.5rem"},"onUpdate:modelValue":a[6]||(a[6]=n=>o.value.email=n)},null,10,Ct),[[N,o.value.email]])]),l.value&&((Z=l.value)!=null&&Z.email)?(i(),d("span",jt,t((ee=l.value)==null?void 0:ee.email[0]),1)):T("",!0)]),e("div",null,[e("div",St,[e("div",Mt,[e("span",Vt,[v(h(Te),{class:"w-5 h-5"})])]),x(e("input",{type:"phone",placeholder:s.$t("Enter phone number"),class:k(["form-input",l.value&&((te=l.value)!=null&&te.phone)?"border-red-500":"border-slate-200"]),style:{"padding-left":"2.5rem"},"onUpdate:modelValue":a[7]||(a[7]=n=>o.value.phone=n)},null,10,Ut),[[N,o.value.phone]])]),l.value&&((se=l.value)!=null&&se.phone)?(i(),d("span",At,t((ae=l.value)==null?void 0:ae.phone[0]),1)):T("",!0)])]),e("div",Nt,[S.value?(i(),d("button",Dt,[y(t(s.$t("Processing"))+" ",1),v(ge)])):(i(),d("button",{key:0,type:"submit",class:"py-4 px-5 bg-primary text-white w-full rounded-xl",disabled:S.value},t(s.$t("Submit Ticket")),9,zt))])],32)],2)]}),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])]))}},Bt=L(It,[["__scopeId","data-v-d0aac01b"]]),Pt={class:"py-3 px-2 text-slate-800 text-lg md:text-2xl font-medium tracking-tight md:leading-loose bg-white flex justify-between gap-2 flex-wrap items-center md:pr-8 lg:pr-16"},Ft={class:"bg-white px-3 border-t border-slate-100 flex gap-4 md:gap-8 overflow-x-auto"},Lt={class:"statusLinkBtn",for:"Pending"},Et={class:"statusLinkBtn",for:"Confirm"},Ot={class:"statusLinkBtn",for:"Cancelled"},Rt={class:"px-2 pt-2 md:px-4 md:pt-4 lg:px-6 lg:pt-6"},Ht={class:"p-3 md:p-4 xl:p-6 bg-white rounded-xl md:rounded-2xl flex flex-col gap-3 md:gap-4"},Gt={key:0},Yt={key:0,class:"flex justify-between items-center w-full mt-8 gap-4 flex-wrap"},Jt={class:"text-slate-800 text-base font-normal leading-normal"},Kt={__name:"SupportTicket",setup(g){const M=ue(),_=de(),b=u(!1),m=u("running"),w=u(0),V=u(0),A=u(0),$=u([]),C=u(10),o=u(10),f=u(1);ie(()=>{j(),window.scrollTo(0,0)}),F(()=>m.value,()=>{f.value=1,j()});const l=r=>{f.value=r,j()},j=()=>{axios.get("/support-tickets",{params:{page:f.value,per_page:o.value,status:m.value},headers:{Authorization:_.token}}).then(r=>{C.value=r.data.data.total,w.value=r.data.data.running,V.value=r.data.data.completed,A.value=r.data.data.cancel,$.value=r.data.data.support_tickets}).catch(r=>{r.response.status===401&&(_.token=null,_.user=null,_.addresses=[],_.favoriteProducts=0,M.push("/"))})};return(r,c)=>{const S=fe("vue-awesome-paginate");return i(),d("div",null,[e("div",Pt,[y(t(r.$t("Support Ticket"))+" ",1),e("button",{class:"px-3 py-2.5 bg-primary text-white rounded-lg flex items-center text-sm font-normal gap-1",onClick:c[0]||(c[0]=p=>b.value=!0)},[v(h(je),{class:"w-5 h-5"}),y(" "+t(r.$t("Create Ticket")),1)])]),e("div",Ft,[e("label",Lt,[x(e("input",{type:"radio","onUpdate:modelValue":c[1]||(c[1]=p=>m.value=p),name:"status",class:"sr-only",value:"Pending",id:"Pending",checked:""},null,512),[[B,m.value]]),y(" "+t(r.$t("Running"))+" ("+t(w.value)+") ",1)]),e("label",Et,[x(e("input",{type:"radio","onUpdate:modelValue":c[2]||(c[2]=p=>m.value=p),name:"status",class:"sr-only",value:"completed",id:"Confirm"},null,512),[[B,m.value]]),y(" "+t(r.$t("Completed"))+" ("+t(V.value)+") ",1)]),e("label",Ot,[x(e("input",{type:"radio","onUpdate:modelValue":c[3]||(c[3]=p=>m.value=p),name:"status",class:"sr-only",value:"cancel",id:"Cancelled"},null,512),[[B,m.value]]),y(" "+t(r.$t("Cancel"))+" ("+t(A.value)+") ",1)])]),e("div",Rt,[e("div",Ht,[(i(!0),d(z,null,D($.value,p=>(i(),he(He,{key:p.id,supportTicket:p},null,8,["supportTicket"]))),128)),$.value.length==0?(i(),d("div",Gt,[e("p",null,t(r.$t("No Ticket Found")),1)])):T("",!0)]),C.value>o.value?(i(),d("div",Yt,[e("div",Jt,t(r.$t("Showing"))+" "+t(o.value*(f.value-1)+1)+" "+t(r.$t("to"))+" "+t(o.value*(f.value-1)+$.value.length)+" "+t(r.$t("of"))+" "+t(C.value)+" "+t(r.$t("results")),1),e("div",null,[v(S,{"total-items":C.value,"items-per-page":o.value,type:"button","max-pages-shown":5,modelValue:f.value,"onUpdate:modelValue":c[4]||(c[4]=p=>f.value=p),"hide-prev-next-when-ends":!0,onClick:l},null,8,["total-items","items-per-page","modelValue"])])])):T("",!0)]),v(Bt,{showModal:b.value,"onUpdate:showModal":c[5]||(c[5]=p=>b.value=p),onTicketCreated:c[6]||(c[6]=p=>j())},null,8,["showModal"])])}}},ss=L(Kt,[["__scopeId","data-v-160d1560"]]);export{ss as default};
