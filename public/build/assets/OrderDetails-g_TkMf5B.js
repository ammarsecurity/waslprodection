import{u as se,a as ae}from"./framework-C9q9PHhQ.js";import{_ as oe}from"./AuthPageHeader-B7hSdchQ.js";import{_ as le,a as R,d as ne,c as re,u as Y,b as ie,f as F,e as X}from"./app-i4sZYluG.js";import{aS as k,u as m,aK as c,v as e,b9 as t,at as K,I as n,F as M,bC as B,bH as w,bi as l,t as j,bJ as N,bw as J,aV as G,H as A,bz as de,bV as me,by as ce,aC as ue,aX as pe}from"./vendor-Cy4BBKy_.js";import{u as E,Y as H,h as I,G as L,e as W,a5 as fe,a6 as he,f as Q,x as Z,_ as ye}from"./ui-BDBDEXQQ.js";import{_ as ve}from"./OrderConfirmModal-CZSsDKcX.js";import"./utilities-STV8t6c4.js";import"./icons-DjuF0c5-.js";const ge={class:"p-4 lg:p-6 bg-white rounded-xl flex flex-col"},xe={class:"flex gap-1 justify-between items-center"},be={class:"text-sm sm:text-base font-normal shrink-0"},_e={class:"text-slate-500"},we={class:"text-blue-500"},$e={class:"flex flex-col items-end gap-3"},ke={class:"flex items-center gap-1 sm:gap-3 mt-1 sm:mt-0 flex-wrap"},Pe={class:"inline-flex gap-2 text-sm md:text-base leading-tight text-ellipsis"},Ce={class:"text-slate-500 shrink-0"},Oe={class:"text-slate-950 whitespace-nowrap text-ellipsis overflow-hidden"},De={class:"flex gap-2"},je={class:"text-slate-500 text-sm md:text-base font-normal leading-normal"},Se={class:"text-slate-950 text-sm md:text-base font-normal leading-normal"},Ae={__name:"OrderDetailsOrderStatus",props:{order:Object},setup(o){const g=R(),d=k(!1),D=async r=>{await axios.post("/store-message",{shop_id:r,user_id:g.user.id,type:"user"},{headers:{Authorization:g.token}}),d.value=!0};return(r,p)=>{var i;return c(),m(M,null,[e("div",ge,[e("div",xe,[e("div",be,[e("span",_e,t(r.$t("Order ID")),1),e("span",we,t(o.order.order_code),1)]),e("div",$e,[e("div",{onClick:p[0]||(p[0]=u=>{var f;return D((f=o.order.shop)==null?void 0:f.id)}),class:"w-8 h-8 flex justify-center items-center bg-red-50 rounded-lg cursor-pointer"},p[2]||(p[2]=[e("img",{src:ne,alt:"chat",class:"w-6 h-6"},null,-1)])),e("div",{class:K(["text-xs sm:text-sm font-normal px-2 py-1 rounded-[10px] inline-block text-ellipsis overflow-hidden",o.order.order_status])},t(o.order.order_status),3)])]),e("div",ke,[e("div",Pe,[e("span",Ce,t(r.$t("Placed on")),1),e("span",Oe,t(o.order.placed_at),1)]),p[3]||(p[3]=e("div",{class:"w-2 h-2 bg-slate-300 rounded-full hidden sm:block"},null,-1)),e("div",De,[e("div",je,t(r.$t("Esd. delivery")),1),e("div",Se,t(o.order.estimated_delivery_date),1)])])]),e("div",null,[n(re,{show:d.value,onClose:p[1]||(p[1]=u=>d.value=!1),shop:(i=o.order)==null?void 0:i.shop},null,8,["show","shop"])])],64)}}},ze=le(Ae,[["__scopeId","data-v-59021abb"]]),Me={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},Ie={class:"flex min-h-full items-center justify-center p-4 text-center sm:p-0"},Ve={class:"bg-white p-5 sm:p-8 text-center"},Re={class:"text-slate-600 py-2 block text-md font-medium border-b"},Te={class:"mt-3 flex flex-wrap gap-4 items-center justify-center"},Ue={key:0,class:"flex items-center gap-4 border relative has-[:checked]:border-primary has-[:checked]:shadow-lg p-2 rounded-md border-slate-200 cursor-pointer grow max-w-40",title:"Cash on delivery"},Be={class:"flex items-center"},Ne={class:"text-slate-600 text-xl overflow-hidden whitespace-nowrap text-ellipsis"},Ge=["for"],Ye=["id","value"],Ee={class:""},He=["src"],Le={class:"mt-5 w-full grow flex justify-end border-t pt-2"},We={key:0},qe={key:1,type:"button",class:"px-4 py-3 md:py-4 bg-primary-300 rounded-lg text-primary text-base font-medium flex items-center gap-1",disabled:""},Fe={key:1},Xe={key:1,type:"button",class:"px-4 py-3 md:py-4 bg-primary-300 rounded-lg text-primary text-base font-medium flex items-center gap-1",disabled:""},Je={__name:"OrderDetailsPaymentAndAgainOrder",props:{order:Object,againOrder:Boolean,makePayment:Boolean},emits:["update:makePayment","update:orderAgain","update:paymentSuccess"],setup(o,{emit:g}){const d=E(),D=R(),r=Y(),p=ie(),i=o,u=k(!1),f=k(null),x=k(!1),v=k(!1),P=k(!1),O=g;B(()=>i.makePayment,()=>{i.makePayment===!0&&(u.value=!0)}),B(()=>i.againOrder,()=>{i.againOrder===!0&&(u.value=!0)}),B(()=>u.value,()=>{u.value===!1&&(O("update:makePayment",!1),O("update:orderAgain",!1))});const b=()=>{if(f.value==null){d.error("Please select payment method",{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"});return}v.value=!0,axios.get("/order-payment/"+i.order.id+"/"+f.value,{headers:{Authorization:D.token}}).then(h=>{h.data.data.order_payment_url&&(O("update:makePayment",!1),u.value=!1,v.value=!1,P.value=!0,V(h.data.data.order_payment_url))}).catch(h=>{v.value=!1,d.error(h.response.data.message,{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"})})},a={component:X,props:{title:"Order Placed",message:"Your order has been placed successfully."}},s=()=>{if(f.value==null){d.error("Please select payment method",{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"});return}x.value=!0,axios.post("/place-order/again",{order_id:i.order.id,payment_method:f.value},{headers:{Authorization:D.token}}).then(h=>{O("update:orderAgain",!1),O("update:makePayment",!1),x.value=!1,u.value=!1,d(a,{type:"default",hideProgressBar:!0,icon:!1,position:r.langDirection==="rtl"?"bottom-right":"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3});const y=h.data.data.order_payment_url;y&&V(y)}).catch(h=>{x.value=!1,u.value=!1,d.error(h.response.data.message,{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"})})},S={component:X,props:{title:"Payment Success!",message:"Your payment has been successfully completed."}},V=h=>{let y=700,C=700,z=screen.width/2-y/2,T=screen.height/2-C/2,U="popup,resizable,height="+C+",width="+y+",top="+T+",left="+z;var $=window.open(h,null,U);if($.title="Payment Window Screen - Make Payment",$.onload=()=>{$.title="Payment Window Screen - Make Payment"},$.focus(),$.closed){d.error("Payment Canceled",{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"}),P.value=!1,router.push("/order-history");return}var _=setInterval(ee,1e3);function ee(){try{if($.closed||!$){clearInterval(_),$.close(),p.orderPaymentCancelModal=!0,d.error("Payment Canceled",{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"}),P.value=!1,router.push("/order-history");return}var q=$.location.pathname.replace(/\/order\/\d+/,"");if(q=="/payment/cancel"){clearInterval(_),P.value=!1,setTimeout(()=>{$.close(),p.orderPaymentCancelModal=!0,d.error("Payment Canceled",{position:r.langDirection==="rtl"?"bottom-right":"bottom-left"}),router.push("/order-history")},8e3);return}if(q=="/payment/success"){if($.close(),clearInterval(_),d(S,{type:"default",hideProgressBar:!0,icon:!1,position:r.langDirection==="rtl"?"bottom-right":"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3}),P.value){P.value=!1,O("update:paymentSuccess",!0);return}router.push("/order-history");return}}catch{}}setTimeout(()=>{clearInterval(_),$.close(),P.value=!1,router.push("/order-history")},18e4)};return(h,y)=>(c(),m("div",null,[n(l(W),{as:"template",show:u.value},{default:w(()=>[n(l(H),{as:"div",class:"relative z-10",onClose:y[2]||(y[2]=C=>u.value=!1)},{default:w(()=>[n(l(I),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:w(()=>y[3]||(y[3]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])),_:1,__:[3]}),e("div",Me,[e("div",Ie,[n(l(I),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:w(()=>[n(l(L),{class:"relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-xl"},{default:w(()=>[e("div",Ve,[e("span",Re,t(h.$t("Available Payment Gateways")),1),e("div",Te,[o.againOrder&&l(r).cashOnDelivery?(c(),m("label",Ue,[N(e("input",{"onUpdate:modelValue":y[0]||(y[0]=C=>f.value=C),id:"cash",name:"paymentGateway",type:"radio",class:"sr-only",value:"cash"},null,512),[[J,f.value]]),e("div",Be,[y[4]||(y[4]=e("img",{src:"/assets/icons/money-2.svg",alt:"",class:"w-12 h-16 object-contain"},null,-1)),e("span",Ne,t(h.$t("Cash On Delivery")),1)])])):j("",!0),l(r).onlinePayment?(c(!0),m(M,{key:1},G(l(r).paymentGateways,C=>(c(),m("label",{key:C.id,for:C.name,class:"flex items-center gap-4 border relative has-[:checked]:border-primary has-[:checked]:shadow-lg p-2 rounded-md border-slate-200 cursor-pointer grow max-w-40"},[N(e("input",{"onUpdate:modelValue":y[1]||(y[1]=z=>f.value=z),id:C.name,name:"paymentGateway",type:"radio",class:"sr-only",value:C.name},null,8,Ye),[[J,f.value]]),e("div",Ee,[e("img",{src:C.logo,alt:"",class:"w-32 h-16 object-contain"},null,8,He)])],8,Ge))),128)):j("",!0)]),e("div",Le,[i.makePayment?(c(),m("div",We,[v.value?(c(),m("button",qe,[n(F),A(" "+t(h.$t("Processing"))+"... ",1)])):(c(),m("button",{key:0,class:"px-4 py-3 md:py-4 bg-primary rounded-lg text-white text-base font-medium",onClick:b},t(h.$t("Confirm Payment")),1))])):j("",!0),i.againOrder?(c(),m("div",Fe,[x.value?(c(),m("button",Xe,[n(F),A(" "+t(h.$t("Processing"))+"... ",1)])):(c(),m("button",{key:0,class:"px-4 py-3 md:py-4 bg-primary rounded-lg text-white text-base font-medium",onClick:s},t(h.$t("Make Order Payment")),1))])):j("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),n(ve)]))}},Ke={class:"bg-white rounded-lg md:rounded-2xl border border-slate-100 p-3 md:p-4 xl:p-6"},Qe={class:"text-slate-950 text-lg md:text-xl font-medium"},Ze={class:"my-4 flex justify-between gap-4"},et={class:"text-slate-950 text-sm sm:text-base font-normal"},tt={class:"text-slate-950 text-sm sm:text-base font-normal"},st={class:"my-4 flex justify-between gap-4"},at={class:"text-slate-950 text-sm sm:text-base font-normal"},ot={class:"text-slate-950 text-sm sm:text-base font-normal"},lt={class:"my-4 flex justify-between gap-4"},nt={class:"text-red-500 text-sm sm:text-base font-normal"},rt={class:"text-slate-950 text-sm sm:text-base font-normal"},it={class:"my-4 flex justify-between gap-4"},dt={class:"text-slate-950 text-sm sm:text-base font-normal"},mt={class:"text-slate-950 text-sm sm:text-base font-normal"},ct={key:0,class:"p-3 bg-slate-100 text-black rounded-lg mb-2"},ut={class:"text-sm sm:text-base font-medium mb-2"},pt={class:"space-y-2"},ft={class:"font-medium"},ht={class:"font-medium"},yt={class:"mt-4 p-3 bg-slate-200 rounded-lg"},vt={class:"text-sm sm:text-base font-medium"},gt={class:"text-base font-bold"},xt={class:"my-4 flex justify-between gap-4"},bt={class:"text-slate-950 text-base sm:text-lg tracking-tight font-medium"},_t={class:"text-slate-950 text-base sm:text-lg tracking-tight"},wt={class:"bg-slate-50 rounded md:rounded-lg border border-slate-100 p-2 lg:p-4 mt-2 flex flex-col gap-1 lg:gap-2"},$t={class:"text-slate-500 text-xs font-normal"},kt={class:"text-slate-950 text-sm md:text-lg font-medium leading-tight flex items-center justify-between flex-wrap"},Pt={key:0,class:"text-red-500 text-sm font-normal bg-red-100 p-1 rounded-md flex gap-1 items-center"},Ct={key:1,class:"bg-emerald-500 text-sm font-normal text-white p-1 rounded-md flex items-center"},Ot={class:"flex flex-wrap gap-2 mt-2 items-center justify-center"},Dt={class:"text-center text-primary text-xs md:text-sm font-normal underline leading-tight"},jt={class:"text-center text-primary text-xs md:text-sm font-normal underline leading-tight"},St={class:"flex items-center gap-2"},At={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},zt={class:"flex min-h-full items-center justify-center p-4 text-center sm:p-0"},Mt={class:"bg-white p-5 sm:p-8 text-center"},It={class:"bg-red-500 w-14 h-14 md:w-20 md:h-20 rounded-full mx-auto flex justify-center items-center"},Vt={class:"mt-3 text-center text-gray-900 text-2xl md:text-3xl font-bold"},Rt={class:"mt-4 text-center text-slate-700 text-base md:text-xl font-normal"},Tt={class:"flex justify-between items-center gap-4 mt-8"},Ut={__name:"OrderDetailsSummery",props:{order:Object},emits:["update:paymentSuccess"],setup(o,{emit:g}){const d=Y(),D=E(),r=R(),p=k(!1),i=k(!1),u=k(!1);k(!1);const f=g,x=()=>{f("update:paymentSuccess",!0)},v=o,P=()=>{axios.post("/orders/cancel",{order_id:v.order.id},{headers:{Authorization:r.token}}).then(a=>{D.success(a.data.message,{position:d.langDirection==="rtl"?"bottom-right":"bottom-left"}),r.orderCancel=!0}),p.value=!1},O=()=>{v.order.invoice_url?window.open(v.order.invoice_url,"_blank"):D.error("Invoice not found",{position:d.langDirection==="rtl"?"bottom-right":"bottom-left"})},b=()=>{var a;(a=v.order)!=null&&a.payment_receipt_url?window.open(v.order.payment_receipt_url,"_blank"):D.error("Payment Slip not found",{position:d.langDirection==="rtl"?"bottom-right":"bottom-left"})};return(a,s)=>{var S,V,h,y,C,z,T,U,$;return c(),m("div",null,[e("div",Ke,[e("div",Qe,t(a.$t("Order Summary")),1),e("div",Ze,[e("div",et,t(a.$t("Items")),1),e("div",tt,t(o.order.quantity),1)]),e("div",st,[e("div",at,t(a.$t("Subtotal")),1),e("div",ot,t(l(d).showCurrency((S=o.order)==null?void 0:S.total_amount)),1)]),e("div",lt,[e("div",nt,t(a.$t("Discount")),1),e("div",rt," -"+t(l(d).showCurrency((V=o.order)==null?void 0:V.coupon_discount)),1)]),e("div",it,[e("div",dt,t(a.$t("Shipping Charge")),1),e("div",mt,t(l(d).showCurrency((h=o.order)==null?void 0:h.delivery_charge)),1)]),((y=o.order.all_vat_taxes)==null?void 0:y.length)>0||((C=o.order)==null?void 0:C.tax_amount)>0?(c(),m("div",ct,[e("h2",ut,t(a.$t("VAT & Taxes Summary")),1),e("div",pt,[(c(!0),m(M,null,G(o.order.all_vat_taxes,_=>(c(),m("div",{key:_.id,class:"flex justify-between bg-slate-200 p-2 rounded-lg"},[e("span",ft,[A(t(_.name)+" ",1),e("small",null,"("+t(_.percentage)+"%)",1)]),e("span",ht,t(l(d).showCurrency(_.amount)),1)]))),128))]),e("div",yt,[e("h3",vt,t(a.$t("Total Tax Amount"))+": ",1),e("p",gt,t(l(d).showCurrency((z=o.order)==null?void 0:z.tax_amount)),1)])])):j("",!0),s[9]||(s[9]=e("div",{class:"w-full h-[0px] border border-slate-400"},null,-1)),e("div",xt,[e("div",bt,t(a.$t("Total Amount")),1),e("div",_t,t(l(d).showCurrency((T=o.order)==null?void 0:T.payable_amount)),1)]),e("div",wt,[e("div",$t,t(a.$t("PAYMENT METHOD")),1),e("div",kt,[A(t(o.order.payment_method)+" ",1),o.order.payment_status==="Pending"?(c(),m("span",Pt,[n(l(fe),{class:"w-5 h-5"}),A(" "+t(o.order.payment_status),1)])):j("",!0),o.order.payment_status==="Paid"?(c(),m("span",Ct,[n(l(he),{class:"w-5 h-5"}),A(" "+t(o.order.payment_status),1)])):j("",!0)])]),e("div",Ot,[e("button",{class:"p-2 lg:p-4 flex gap-1 lg:gap-2 items-center justify-center",onClick:b},[s[7]||(s[7]=e("img",{src:"/assets/icons/cloud.svg",alt:"download",class:"w-4 h-4 md:w-6 md:h-6"},null,-1)),e("span",Dt,t(a.$t("Payment Slip")),1)]),e("button",{class:"p-2 lg:p-4 flex gap-1 lg:gap-2 items-center justify-center",onClick:O},[s[8]||(s[8]=e("img",{src:"/assets/icons/cloud.svg",alt:"download",class:"w-4 h-4 md:w-6 md:h-6"},null,-1)),e("span",jt,t(a.$t("Download Invoice")),1)])])]),e("div",St,[o.order.order_status==="Pending"?(c(),m("button",{key:0,class:"mt-2 px-4 py-3 md:py-4 bg-white rounded-lg text-slate-700 text-base font-medium grow",onClick:s[0]||(s[0]=_=>p.value=!0)},t(a.$t("Cancel Order")),1)):j("",!0),((U=v.order)==null?void 0:U.payment_status)=="Pending"&&(($=v.order)==null?void 0:$.payment_method)=="Online Payment"?(c(),m("button",{key:1,class:"mt-2 px-4 py-3 md:py-4 bg-primary rounded-lg text-white text-base font-medium grow",onClick:s[1]||(s[1]=_=>u.value=!0)},t(a.$t("Make Payment")),1)):j("",!0)]),o.order.order_status==="Delivered"?(c(),m("button",{key:0,class:"w-full mt-2 px-4 py-3 md:py-4 bg-primary rounded-lg text-white text-base font-medium",onClick:s[2]||(s[2]=_=>i.value=!0)},t(a.$t("Order Again")),1)):j("",!0),n(l(W),{as:"template",show:p.value},{default:w(()=>[n(l(H),{as:"div",class:"relative z-10",onClose:s[4]||(s[4]=_=>p.value=!1)},{default:w(()=>[n(l(I),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:w(()=>s[10]||(s[10]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1)])),_:1,__:[10]}),e("div",At,[e("div",zt,[n(l(I),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:w(()=>[n(l(L),{class:"relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg"},{default:w(()=>[e("div",Mt,[e("div",It,[n(l(Q),{class:"w-8 h-8 md:w-12 md:h-12 text-white"})]),e("div",Vt,t(a.$t("Cancel the Order"))+"! ",1),e("div",Rt,t(a.$t("Are you sure want to cancel this order"))+"? ",1),e("div",Tt,[e("button",{class:"text-slate-800 grow text-base font-medium px-4 py-3 md:px-6 md:py-4 rounded-lg md:rounded-[10px] border border-slate-300",onClick:s[3]||(s[3]=_=>p.value=!1)},t(a.$t("Cancel")),1),e("button",{class:"text-white grow bg-red-500 text-base font-medium px-4 py-3 md:px-6 md:py-4 rounded-lg md:rounded-[10px]",onClick:P},t(a.$t("Yes")),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),n(Je,{order:o.order,makePayment:u.value,againOrder:i.value,"onUpdate:makePayment":s[5]||(s[5]=_=>u.value=!1),"onUpdate:orderAgain":s[6]||(s[6]=_=>i.value=!1),"onUpdate:paymentSuccess":x},null,8,["order","makePayment","againOrder"])])}}},Bt={class:"space-y-2 divide-y divide-slate-200"},Nt={class:"w-[72px] h-[95px]"},Gt=["src"],Yt={class:"flex flex-col gap-1 w-full relative"},Et={class:"text-primary text-xs font-normal leading-none"},Ht={class:"flex justify-between items-center gap-2"},Lt={class:"text-slate-950 text-base font-normal leading-normal"},Wt=["onClick"],qt={key:1,class:"flex items-center gap-0"},Ft={class:"flex flex-wrap justify-between items-center gap-3"},Xt={class:"flex items-center gap-1"},Jt={class:"min-w-8 text-center px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},Kt={class:"px-2 py-1 bg-slate-100 rounded text-slate-800 text-xs font-normal"},Qt={class:"text-slate-800 text-base font-normal leading-normal"},Zt={class:"fixed inset-0 z-10 w-screen overflow-y-auto"},es={class:"flex min-h-full items-center justify-center p-4 text-center sm:p-0"},ts={class:"bg-white p-5 sm:p-8 relative"},ss={class:"text-xl font-semibold text-gray-800 mb-4"},as={class:"flex justify-center items-center gap-3 mb-4"},os={class:"text-gray-600 text-lg"},ls=["placeholder"],ns={class:"flex justify-end space-x-3 mt-4"},rs={__name:"OrderProducts",props:{order:Object,default:()=>{}},emits:["refresh"],setup(o,{emit:g}){const d=E(),D=R(),r=o,p=g,i=Y(),u=k(0),f=k(""),x=k(!1),v=k(""),P=b=>{v.value=b,u.value=0,f.value="",x.value=!0},O=()=>{if(u.value==0)return d.error("Please select rating",{position:i.langDirection==="rtl"?"bottom-right":"bottom-left"}),!1;if(f.value=="")return d.error("Please enter message",{position:i.langDirection==="rtl"?"bottom-right":"bottom-left"}),!1;axios.post("/product-review",{rating:u.value,description:f.value,order_id:r.order.id,product_id:v.value},{headers:{Authorization:`${D.token}`}}).then(b=>{d.success(b.data.message,{position:i.langDirection==="rtl"?"bottom-right":"bottom-left"}),x.value=!1,p("refresh")}).catch(b=>{d.error(b.response.data.message,{position:i.langDirection==="rtl"?"bottom-right":"bottom-left"})})};return(b,a)=>(c(),m(M,null,[e("div",Bt,[(c(!0),m(M,null,G(o.order.products,s=>(c(),m("div",{key:s.id,class:"flex gap-4 justify-start w-full items-center pt-1"},[e("div",Nt,[e("img",{src:s.thumbnail,class:"w-full h-full object-contain"},null,8,Gt)]),e("div",Yt,[e("div",Et,t(s.brand),1),e("div",Ht,[e("div",Lt,t(s.name),1),N(e("div",null,[s.rating?(c(),m("div",qt,[(c(),m(M,null,G(5,S=>e("span",{key:S},[n(l(Z),{class:K(["w-5 h-5",S<=s.rating?"text-amber-500":"text-slate-200"])},null,8,["class"])])),64))])):(c(),m("button",{key:0,class:"px-2 py-1 w-full sm:w-auto bg-amber-500 rounded-md md:rounded-lg text-white text-sm font-normal",onClick:S=>P(s.id)},t(b.$t("Review")),9,Wt))],512),[[de,o.order.order_status==="Delivered"]])]),e("div",Ft,[e("div",Xt,[e("div",Jt,t(s.size),1),e("div",Kt,t(s.color),1)]),e("div",Qt,t(s.order_qty)+" X "+t(l(i).showCurrency(s.discount_price>0?s.discount_price:s.price)),1)])])]))),128))]),n(l(W),{as:"template",show:x.value},{default:w(()=>[n(l(H),{as:"div",class:"relative z-10",onClose:a[5]||(a[5]=s=>x.value=!1)},{default:w(()=>[n(l(I),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:w(()=>a[6]||(a[6]=[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-50 transition-opacity"},null,-1)])),_:1,__:[6]}),e("div",Zt,[e("div",es,[n(l(I),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:w(()=>[n(l(L),{class:"relative transform overflow-hidden rounded-2xl bg-white text-left shadow-xl transition-all my-8 md:my-0 w-full sm:max-w-lg md:max-w-xl"},{default:w(()=>[e("div",ts,[e("div",{class:"w-9 h-9 bg-slate-100 rounded-[32px] absolute top-4 right-4 flex justify-center items-center cursor-pointer",onClick:a[0]||(a[0]=s=>x.value=!1)},[n(l(Q),{class:"w-6 h-6 text-slate-600"})]),e("h2",ss,t(b.$t("Rate Your Experience")),1),e("div",as,[n(l(me),{modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=s=>u.value=s),"star-size":42,inactiveColor:"#cbd5e1"},null,8,["modelValue"]),e("div",os,[e("span",null,t(b.$t("Rating"))+":",1),A(" "+t(u.value),1)])]),e("div",null,[a[7]||(a[7]=e("label",{for:"description"},"Message",-1)),N(e("textarea",{"onUpdate:modelValue":a[2]||(a[2]=s=>f.value=s),class:"border border-gray-300 p-2 w-full rounded focus:border-primary outline-none",rows:"4",placeholder:b.$t("Enter your description")},null,8,ls),[[ce,f.value]])]),e("div",ns,[e("button",{class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-semibold py-3.5 px-4 rounded-lg focus:outline-none flex-grow",onClick:a[3]||(a[3]=s=>x.value=!1)},t(b.$t("Cancel")),1),e("button",{class:"bg-primary hover:bg-primary-600 text-white font-semibold py-3.5 px-4 rounded-lg focus:outline-none flex-grow",onClick:a[4]||(a[4]=s=>O())},t(b.$t("Submit")),1)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64))}},is={class:"bg-white px-3 text-slate-600 flex items-center gap-1 pt-2"},ds={class:"leading-normal"},ms={class:"px-2 pt-2 md:px-4 md:pt-4 lg:px-6 lg:pt-6"},cs={class:"grid grid-cols-3 gap-4 md:gap-6 mt-4 p-3 md:p-4 xl:p-6 bg-white rounded-lg md:rounded-2xl"},us={class:"col-span-3 lg:col-span-2 bg-white rounded-lg md:rounded-2xl border border-slate-100 p-3 md:p-4 xl:p-6"},ps={class:"text-slate-500 text-xs md:text-base font-normal leading-none"},fs={class:"flex items-center gap-3 mt-2"},hs=["src"],ys={class:"flex flex-wrap gap-2 justify-between items-start grow"},vs={class:"text-slate-950 text-sm md:text-base font-normal leading-tight"},gs={class:"flex items-center gap-1"},xs={class:"text-slate-800 text-xs md:text-base font-medium"},bs={class:"text-slate-600 text-sm md:text-base font-normal leading-tight"},_s={class:"col-span-3 lg:col-span-1"},Ss={__name:"OrderDetails",setup(o){const g=R(),d=se(),D=ae(),r=k({});B(()=>g.orderCancel,()=>{g.orderCancel==!0&&p(),g.orderCancel=!1}),ue(()=>{p(),window.scrollTo(0,0,{behavior:"smooth"})});const p=async()=>{axios.get("/order-details",{params:{order_id:d.params.id},headers:{Authorization:g.token}}).then(i=>{r.value=i.data.data.order}).catch(i=>{i.response.status===401&&(g.token=null,g.user=null,g.addresses=[],g.favoriteProducts=0,D.push("/"))})};return(i,u)=>{var x,v,P,O;const f=pe("router-link");return c(),m("div",null,[e("div",is,[n(l(ye),{class:"w-5 h-5 md:w-6 md:h-6"}),n(f,{to:"/order-history",class:"leading-normal hover:text-primary"},{default:w(()=>[A(t(i.$t("Order History")),1)]),_:1}),e("span",ds,"/ "+t(i.$t("Order Details")),1)]),n(oe,{title:i.$t("Order Details")},null,8,["title"]),e("div",ms,[n(ze,{order:r.value},null,8,["order"]),e("div",cs,[e("div",us,[e("div",ps,t(i.$t("Purchased from")),1),e("div",fs,[e("img",{class:"w-9 h-9 md:w-12 md:h-12",src:(x=r.value.shop)==null?void 0:x.logo},null,8,hs),e("div",ys,[e("div",null,[e("div",vs,t((v=r.value.shop)==null?void 0:v.name),1),e("div",gs,[n(l(Z),{class:"w-5 h-5 text-yellow-400"}),e("span",xs,t((P=r.value.shop)==null?void 0:P.rating),1)])])])]),u[0]||(u[0]=e("div",{class:"w-full h-[0px] border-t border-slate-200 my-3"},null,-1)),e("div",bs,t(i.$t("Products"))+" ("+t((O=r.value.products)==null?void 0:O.length)+") ",1),n(rs,{order:r.value,onRefresh:p},null,8,["order"])]),e("div",_s,[n(Ut,{order:r.value,"onUpdate:paymentSuccess":p},null,8,["order"])])])])])}}};export{Ss as default};
