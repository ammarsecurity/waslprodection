import{_ as ne,a as de,G as ie,u as ue,q as pe,r as m,o as ce,w as me,b as he,c as d,d as i,h as p,f as e,af as ve,ak as fe,e as h,t as l,g as v,l as u,al as ge,a8 as X,A as k,B as P,s as x,a6 as be,a9 as _e,F as xe,j as ye,a0 as we}from"./app-CzAdLK8K.js";import{_ as $e}from"./VerifyOtpModal-0olbAQS1.js";import{r as Z}from"./ExclamationTriangleIcon-CKwF0g44.js";const ke={class:"p-3 md:p-4 xl:p-6"},Me={class:"max-w-[920px] mx-auto bg-white rounded-xl md:rounded-2xl p-3 md:p-4 xl:p-6"},Ce={class:"p-4 bg-slate-50 rounded-xl border border-slate-100 relative"},Ve={class:"text-primary text-sm font-medium"},Pe={class:"flex flex-col gap-2 justify-center items-center"},Ue=["src"],De={class:"flex gap-2"},je={for:"upload",class:"text-white text-sm font-normal px-2 py-1 md:px-3 md:py-2 bg-slate-800 rounded-md cursor-pointer"},Be={key:1,class:"flex items-center gap-1 absolute top-3 right-3 border py-0.5 px-2 rounded-3xl bg-green-200 text-green-600"},Ae={class:"p-3 bg-white rounded-xl border border-slate-100 mt-3"},Ne={class:"grid grid-cols-1 lg:grid-cols-2 gap-y-5 gap-x-6"},Se={for:"name",class:"form-label"},ze=["placeholder"],Le={key:0,class:"text-red-500 text-sm"},Fe={for:"name",class:"form-label mb-2"},Te={key:0,class:"text-red-500 text-sm"},Ee={for:"phone",class:"form-label justify-between"},Oe={key:0,class:"flex items-center gap-1"},Re={key:1,class:"text-green-500 text-sm flex items-center gap-0.5"},Ye={class:"flex"},qe=["placeholder","maxlength"],Ge={key:0,class:"text-red-500 text-sm"},He={for:"gender",class:"form-label bg-transparent"},Ie={value:"",disabled:"",selected:""},We={value:"male"},Je={value:"female"},Ke={value:"other"},Qe={key:0,class:"text-red-500 text-sm"},Xe={for:"date",class:"form-label"},Ze={key:0,class:"text-red-500 text-sm"},et={key:0,type:"submit",class:"bg-primary px-4 md:px-6 py-2 md:py-4 rounded-lg :md:rounded-[10px] text-white mt-6"},tt={key:1,type:"button",class:"bg-primary-200 px-4 md:px-6 py-2 md:py-4 rounded-lg :md:rounded-[10px] text-primary mt-6 flex items-center justify-center cursor-not-allowed gap-2",disabled:""},ot={key:0,class:"max-w-[920px] mx-auto bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl md:rounded-2xl p-4 md:p-6 mt-4 border border-blue-200"},st={class:"flex items-center gap-3 mb-4"},lt={class:"text-lg font-semibold text-blue-900"},at={class:"text-sm text-blue-700"},rt={class:"bg-white rounded-lg p-4 border border-blue-100"},nt={class:"text-sm text-slate-600 mb-3"},dt={class:"flex flex-wrap gap-2"},it=["src","alt"],ut={key:1,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},pt={class:"mt-4 pt-4 border-t border-blue-100"},ct={class:"flex items-start gap-2"},mt={class:"text-sm text-slate-600"},ht={__name:"MyProfile",setup(vt){var D,j,B,A,N,S,z,L;const ee=de(),M=ie(),c=ue(),n=pe(),a=m(null),y=m(!1),w=m(null),$=m(!1),C=m(!1),U=()=>{C.value=!0},te=()=>{var t;w.value=(t=n.user)==null?void 0:t.profile_photo,$.value=!1},oe=t=>{w.value=URL.createObjectURL(t.target.files[0]),s.value.profile_photo=t.target.files[0],$.value=!0},s=m({name:(D=n.user)==null?void 0:D.name,phone:(j=n.user)==null?void 0:j.phone,gender:(B=n.user)!=null&&B.gender?(A=n.user)==null?void 0:A.gender:"",date_of_birth:(N=n.user)==null?void 0:N.date_of_birth,email:(S=n.user)==null?void 0:S.email,profile_photo:null,phone_code:(z=n.user)==null?void 0:z.phone_code,country:(L=n.user)==null?void 0:L.country}),V=m([]),se=m(!1);ce(async()=>{var t,o;await n.refreshUser(),n.user&&(w.value=(t=n.user)==null?void 0:t.profile_photo),window.scrollTo(0,0),((o=n.user)==null?void 0:o.email)==="user@readyecommerce.com"&&(se.value=!0),le()}),me(()=>s.value.country,t=>{const o=V.value.find(f=>f.name==t);s.value.phone_code=o==null?void 0:o.phone_code});const le=()=>{axios.get("/countries").then(t=>{V.value=t.data.data.countries})},ae={component:we,props:{title:"Profile Updated",message:"Your profile updated successfully"}},re=()=>{const t=new FormData;t.append("name",s.value.name),t.append("phone",s.value.phone),t.append("gender",s.value.gender?s.value.gender:""),t.append("date_of_birth",s.value.date_of_birth?s.value.date_of_birth:""),t.append("email",s.value.email?s.value.email:""),t.append("country",s.value.country?s.value.country:""),t.append("phone_code",s.value.phone_code?s.value.phone_code:""),s.value.profile_photo&&t.append("profile_photo",s.value.profile_photo),y.value=!0,axios.post("/update-profile",t,{headers:{Authorization:n.token}}).then(o=>{n.user=o.data.data.user,$.value=!1,y.value=!1,M(ae,{type:"default",hideProgressBar:!0,icon:!1,position:c.langDirection==="rtl"?"bottom-right":"bottom-left",toastClassName:"vue-toastification-alert",timeout:2e3}),a.value={}}).catch(o=>{var f,g,b,_;if(y.value=!1,o.response.status===401){n.logout(),ee.push("/");return}M.error((g=(f=o.response)==null?void 0:f.data)==null?void 0:g.message,{position:c.langDirection==="rtl"?"bottom-right":"bottom-left"}),a.value=o.response.data.errors,(b=a.value)!=null&&b.profile_photo&&M.error((_=a.value)==null?void 0:_.profile_photo[0],{position:c.langDirection==="rtl"?"bottom-right":"bottom-left"})})};return(t,o)=>{var g,b,_,F,T,E,O,R,Y,q,G,H,I,W,J,K,Q;const f=he("v-select");return i(),d("div",null,[p(ve,{title:t.$t("My Profile")},null,8,["title"]),e("div",ke,[e("form",{onSubmit:o[8]||(o[8]=fe(r=>re(),["prevent"]))},[e("div",Me,[e("div",Ce,[e("div",Ve,l(t.$t("Profile Picture")),1),e("div",Pe,[e("img",{src:w.value,alt:"",class:"w-24 h-24 md:w-36 md:h-36 bg-white rounded-full object-cover"},null,8,Ue),e("div",De,[e("label",je,[e("input",{type:"file",id:"upload",class:"hidden",onChange:oe},null,32),v(" "+l(t.$t("Change Photo")),1)]),$.value?(i(),d("button",{key:0,class:"px-2 py-1 md:px-3 md:py-2 bg-red-500 text-white rounded-md",onClick:te},[p(u(ge),{class:"w-5 h-5"})])):h("",!0)])]),(g=u(n).user)!=null&&g.account_verified?(i(),d("div",Be,[p(u(X),{class:"w-5 h-5"}),v(" "+l(t.$t("Verified")),1)])):(i(),d("div",{key:0,class:"flex items-center gap-1 absolute top-3 right-3 border py-0.5 px-2 rounded-3xl bg-red-200 text-red-600",onClick:o[0]||(o[0]=r=>U())},[p(u(Z),{class:"w-5 h-5"}),v(" "+l(t.$t("Unverified")),1)]))]),e("div",Ae,[e("div",Ne,[e("div",null,[e("label",Se,l(t.$t("Name")),1),k(e("input",{type:"text",id:"name","onUpdate:modelValue":o[1]||(o[1]=r=>s.value.name=r),placeholder:t.$t("Enter name"),class:x(["form-input",a.value&&((b=a.value)!=null&&b.name)?"border-red-500":"border-slate-200"])},null,10,ze),[[P,s.value.name]]),a.value&&((_=a.value)!=null&&_.name)?(i(),d("span",Le,l((F=a.value)==null?void 0:F.name[0]),1)):h("",!0)]),e("div",null,[e("label",Fe,l(t.$t("Country")),1),p(f,{options:V.value,label:"name",reduce:r=>r.name,modelValue:s.value.country,"onUpdate:modelValue":o[2]||(o[2]=r=>s.value.country=r),placeholder:t.$t("Select Country"),dir:u(c).langDirection||"ltr"},null,8,["options","reduce","modelValue","placeholder","dir"]),a.value&&((T=a.value)!=null&&T.country)?(i(),d("span",Te,l((E=a.value)==null?void 0:E.country[0]),1)):h("",!0)]),e("div",null,[e("label",Ee,[v(l(t.$t("Mobile Number"))+" ",1),u(c).register_otp_type=="phone"?(i(),d("div",Oe,[(O=u(n).user)!=null&&O.email_verified?(i(),d("span",Re,[p(u(X),{class:"w-4 h-4"}),v(" "+l(t.$t("Verified")),1)])):(i(),d("span",{key:0,class:"text-red-400 text-sm flex items-center gap-0.5 cursor-pointer",onClick:o[3]||(o[3]=r=>U())},[p(u(Z),{class:"w-4 h-4"}),v(" "+l(t.$t("Unverified")),1)]))])):h("",!0)]),e("div",Ye,[e("span",{class:x(["text-slate-700 text-base font-normal leading-normal bg-slate-100 p-2 border-y flex items-center",u(c).langDirection=="rtl"?"border-r rounded-tr-lg rounded-br-lg":"border-l rounded-tl-lg rounded-bl-lg"])}," +"+l(s.value.phone_code||"00"),3),k(e("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=r=>s.value.phone=r),placeholder:t.$t("Enter phone number"),class:x(["text-base font-normal w-full p-3 placeholder:text-slate-400 border focus:border-primary outline-none",[(R=a.value)!=null&&R.phone?"border-red-500":"border-slate-200",u(c).langDirection=="rtl"?"rounded-tl-lg rounded-bl-lg":"rounded-tr-lg rounded-br-lg"]]),maxlength:u(c).phoneMaxLength,onInput:o[5]||(o[5]=r=>s.value.phone=s.value.phone.replace(/[^\d]/g,""))},null,42,qe),[[P,s.value.phone]])]),a.value&&((Y=a.value)!=null&&Y.phone)?(i(),d("span",Ge,l((q=a.value)==null?void 0:q.phone[0]),1)):h("",!0)]),e("div",null,[e("label",He,l(t.$t("Gender")),1),k(e("select",{name:"gender",id:"gender","onUpdate:modelValue":o[6]||(o[6]=r=>s.value.gender=r),class:x(["form-input bg-transparent h-[52px]",a.value&&((G=a.value)!=null&&G.gender)?"border-red-500":"border-slate-200"])},[e("option",Ie,l(t.$t("Select a gender")),1),e("option",We,l(t.$t("Male")),1),e("option",Je,l(t.$t("Female")),1),e("option",Ke,l(t.$t("Other")),1)],2),[[be,s.value.gender]]),a.value&&((H=a.value)!=null&&H.gender)?(i(),d("span",Qe,l((I=a.value)==null?void 0:I.gender[0]),1)):h("",!0)]),e("div",null,[e("label",Xe,l(t.$t("Date of Birth")),1),k(e("input",{type:"date",id:"date","onUpdate:modelValue":o[7]||(o[7]=r=>s.value.date_of_birth=r),class:x(["form-input",a.value&&((W=a.value)!=null&&W.date_of_birth)?"border-red-500":"border-slate-200"])},null,2),[[P,s.value.date_of_birth]]),a.value&&((J=a.value)!=null&&J.date_of_birth)?(i(),d("span",Ze,l((K=a.value)==null?void 0:K.date_of_birth[0]),1)):h("",!0)]),o[10]||(o[10]=e("div",null,null,-1))]),y.value?(i(),d("button",tt,[v(l(t.$t("Processing"))+" ",1),p(_e)])):(i(),d("button",et,l(t.$t("Update Profile")),1))]),(Q=u(n).user)!=null&&Q.agent_shops&&u(n).user.agent_shops.length>0?(i(),d("div",ot,[e("div",st,[o[11]||(o[11]=e("div",{class:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})])],-1)),e("div",null,[e("h3",lt,l(t.$t("Wholesale Agent Account")),1),e("p",at,l(t.$t("You are registered as a wholesale agent")),1)])]),e("div",rt,[e("p",nt,l(t.$t("You have special wholesale pricing access for the following shops"))+": ",1),e("div",dt,[(i(!0),d(xe,null,ye(u(n).user.agent_shops,r=>(i(),d("div",{key:r.id,class:"inline-flex items-center gap-2 px-3 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium"},[r.logo?(i(),d("img",{key:0,src:r.logo,alt:r.name,class:"w-6 h-6 rounded-full object-cover"},null,8,it)):(i(),d("svg",ut,o[12]||(o[12]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))),e("span",null,l(r.name),1)]))),128))]),e("div",pt,[e("div",ct,[o[13]||(o[13]=e("svg",{class:"w-5 h-5 text-blue-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",mt,l(t.$t("As an agent, you will see special wholesale prices on products from these shops. Contact the shop owner if you have any questions about your agent status.")),1)])])])])):h("",!0)])],32)]),p($e,{showModal:C.value,onHideModal:o[9]||(o[9]=r=>C.value=!1)},null,8,["showModal"])])}}},_t=ne(ht,[["__scopeId","data-v-c88792ba"]]);export{_t as default};
